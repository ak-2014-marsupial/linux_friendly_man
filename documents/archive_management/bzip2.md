# Посібник з команд `bzip2` та `bunzip2`

`bzip2` (Burrows-Wheeler zip 2) — це вільний та відкритий компресор даних, відомий тим, що забезпечує вищий коефіцієнт стиснення, ніж традиційний `gzip`, хоча зазвичай працює трохи повільніше.

Як і `gzip`, `bzip2` є утилітою для стиснення **окремих файлів**. Вона не може об'єднувати директорії в архів. Для цього її використовують у парі з `tar`.

`bunzip2` — це команда для розпакування файлів, стиснутих `bzip2` (з розширенням `.bz2`).

### **Ключові концепції**

*   **Краще стиснення**: Головна причина використовувати `bzip2` — це коли потрібно отримати файл якомога меншого розміру.
*   **Заміна файлу**: За замовчуванням, `bzip2` замінює оригінальний файл на стиснену версію з розширенням `.bz2`. `bunzip2` робить навпаки.
*   **`bunzip2` — це псевдонім**: Команда `bunzip2` повністю еквівалентна `bzip2 -d`.

#### **Базовий синтаксис**

```bash
bzip2 [опції] [файл]
bunzip2 [опції] [файл.bz2]
```

---

### **Основні опції `bzip2`**

| Опція | Пояснення |
| :--- | :--- |
| **`-d`** | **(Decompress)**. Розпакувати файл. Змушує `bzip2` поводитися як `bunzip2`. |
| **`-k`** | **(Keep)**. Не видаляти оригінальний файл після стиснення або розпакування. |
| **`-c`** | **(Stdout)**. Виводити результат в стандартний потік виводу, а не у файл. |
| **`-t`** | **(Test)**. Перевірити цілісність вказаного `.bz2` файлу без його розпакування. |
| **`-z`** | **(Compress)**. Примусово стиснути. Це дія за замовчуванням. |
| **`-[1-9]`** | Встановити розмір блоку (впливає на стиснення). `-1` — найшвидше, але найгірше стиснення. `-9` — найповільніше, але найкраще. За замовчуванням — `-9`. |

### **Основні опції `bunzip2`**

| Опція | Пояснення |
| :--- | :--- |
| **`-k`** | **(Keep)**. Не видаляти архівний файл (`.bz2`) після розпакування. |
| **`-c`** | **(Stdout)**. Вивести розпакований вміст у стандартний вивід. |

---

### **Практичні приклади**

#### **Стиснення файлів (`bzip2`)**

1.  **Стиснути файл (оригінал буде видалено):**
    ```bash
    bzip2 large_file.log
    # Результат: з'явиться large_file.log.bz2
    ```

2.  **Стиснути файл, зберігши оригінал:**
    ```bash
    bzip2 -k document.pdf
    ```

3.  **Стиснути файл з найшвидшим (але найгіршим) стисненням:**
    ```bash
    bzip2 -1 data.json
    ```

#### **Розпакування файлів (`bunzip2`)**

4.  **Розпакувати файл (архів `.bz2` буде видалено):**
    ```bash
    bunzip2 large_file.log.bz2
    ```

5.  **Розпакувати файл за допомогою `bzip2 -d`:**
    ```bash
    bzip2 -d document.pdf.bz2
    ```

6.  **Розпакувати файл, зберігши архів:**
    ```bash
    bunzip2 -k data.json.bz2
    ```

#### **Робота з потоками та `tar`**

7.  **Створити `.tar.bz2` архів за допомогою `tar`:**
    *   Прапор `-j` в `tar` автоматично використовує `bzip2`.
    ```bash
    tar -cjvf archive.tar.bz2 ./my_project
    ```

8.  **Розпакувати `.tar.bz2` архів:**
    ```bash
    tar -xjvf archive.tar.bz2
    ```

9.  **Створити стиснений дамп бази даних:**
    ```bash
    mysqldump -u user -p my_db | bzip2 > my_db.sql.bz2
    ```

#### **Перевірка цілісності**

10. **Перевірити, чи не пошкоджений архів:**
    ```bash
    bzip2 -t important_backup.tar.bz2
    ```

### **`bzip2` чи `gzip`?**

| Критерій | `bzip2` | `gzip` |
| :--- | :--- | :--- |
| **Стиснення** | **Краще.** Зазвичай створює файли меншого розміру. | Добре, але зазвичай гірше, ніж `bzip2`. |
| **Швидкість** | Повільніший. | **Швидший.** Значно швидший як при стисненні, так і при розпакуванні. |
| **Популярність** | Дуже поширений, особливо для розповсюдження великих файлів (наприклад, вихідного коду). | Більш поширений, є стандартом де-факто для багатьох інструментів та протоколів (наприклад, HTTP стиснення). |

**Коли що використовувати:**
*   **`gzip`**: Коли швидкість є пріоритетом, а також для загальних завдань (наприклад, стиснення веб-трафіку).
*   **`bzip2`**: Коли пріоритетом є отримання файлу якомога меншого розміру, і ви готові пожертвувати швидкістю (наприклад, для довгострокового архівування, бекапів).
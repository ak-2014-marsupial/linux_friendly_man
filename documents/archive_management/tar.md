# Посібник з використання утиліти `tar`

Утиліта `tar` (tape archiver) — це потужний інструмент для роботи з архівами, відомими як "тарболи" (tarballs). `tar` дозволяє об'єднувати багато файлів та директорій в один файл для зручності перенесення та зберігання. 

Сама по собі `tar` не стискає дані, а лише архівує їх. Для стиснення вона використовується разом із зовнішніми утилітами, такими як `gzip`, `bzip2` або `xz`, що створює файли з розширеннями `.tar.gz`, `.tar.bz2`, `.tar.xz`.

### **Режими роботи та базовий синтаксис**

Робота `tar` будується навколо режимів, які вказують, яку саме дію потрібно виконати. Основні режими є взаємовиключними (не можна, наприклад, одночасно створювати та розпаковувати архів).

```bash
tar [режим_та_опції] [назва_архіву] [файли_для_архівації...]
```

#### **Основні режими**

| Режим | Пояснення |
| :--- | :--- |
| **`-c`** | **(Create)**. Створити новий архів. |
| **`-x`** | **(Extract)**. Розпакувати файли з архіву. |
| **`-t`** | **(List)**. Показати список файлів та директорій всередині архіву, не розпаковуючи його. |
| **`-r`** | **(Append)**. Додати файли в кінець існуючого архіву (не працює зі стисненими архівами). |
| **`-u`** | **(Update)**. Додати в архів лише ті файли, які є новішими за їхні копії в архіві. |

---

### **Ключові опції (прапори)**

Ці опції комбінуються з режимами для керування процесом.

| Опція | Пояснення |
| :--- | :--- |
| **`-f [файл]`** | **(File)**. **Найважливіша опція.** Вказує ім'я файлу архіву. Майже завжди є обов'язковою. Зазвичай її ставлять останньою в блоці опцій, одразу перед іменем архіву. |
| **`-v`** | **(Verbose)**. Детальний режим. Показувати імена файлів, які обробляються в даний момент. |
| **`-z`** | **(Gzip)**. Обробляти архів за допомогою `gzip`. Використовується для файлів `.tar.gz` або `.tgz`. |
| **`-j`** | **(Bzip2)**. Обробляти архів за допомогою `bzip2`. Використовується для файлів `.tar.bz2`. |
| **`-J`** | **(XZ)**. Обробляти архів за допомогою `xz`. Використовується для файлів `.tar.xz` (найвищий рівень стиснення). |
| **`-C [директорія]`** | **(Directory)**. Перейти у вказану директорію перед виконанням операції. Особливо корисно при розпакуванні, щоб вказати, куди саме розпаковувати файли. |
| **`--exclude=[шаблон]`** | Виключити файли, що відповідають шаблону, при створенні архіву. |

---

### **Практичні приклади**

Мнемонічні правила, які допоможуть запам'ятати комбінації:
*   Створення: `tar -czvf` -> **C**reate **Z**ipped **V**erbose **F**ile
*   Розпакування: `tar -xzvf` -> **X**tract **Z**ipped **V**erbose **F**ile

#### **Створення архівів**

1.  **Створити простий `.tar` архів з директорії `project`:**
    ```bash
    tar -cvf project.tar ./project
    ```

2.  **Створити стиснений `gzip` архів (`.tar.gz`):**
    ```bash
    tar -czvf project.tar.gz ./project
    ```

3.  **Створити архів з максимальним стисненням `bzip2` (`.tar.bz2`):**
    ```bash
    tar -cjvf project.tar.bz2 ./project
    ```

4.  **Заархівувати кілька файлів та директорій одночасно:**
    ```bash
    tar -czvf backup.tar.gz /home/user/documents /var/log/nginx /etc/hosts
    ```

5.  **Створити архів, виключаючи непотрібні директорії та файли:**
    ```bash
    tar -czvf source_code.tar.gz ./my_app --exclude="node_modules" --exclude=".git" --exclude="*.log"
    ```

#### **Перегляд архівів**

6.  **Подивитися вміст архіву `.tar.gz` без розпакування:**
    ```bash
    tar -tzvf archive.tar.gz
    ```

7.  **Знайти конкретний файл в архіві за допомогою `grep`:**
    ```bash
    tar -tzvf archive.tar.gz | grep "config.yaml"
    ```

#### **Розпакування архівів**

8.  **Розпакувати архів `.tar.gz` у поточну директорію:**
    ```bash
    tar -xzvf archive.tar.gz
    ```

9.  **Розпакувати архів `.tar.bz2`:**
    ```bash
    tar -xjvf archive.tar.bz2
    ```

10. **Розпакувати архів в іншу (конкретну) директорію:**
    ```bash
    # Спочатку створюємо директорію, якщо її немає
    mkdir -p /path/to/destination
    tar -xzvf archive.tar.gz -C /path/to/destination
    ```

11. **Розпакувати лише один конкретний файл з архіву:**
    ```bash
    tar -xzvf archive.tar.gz path/inside/archive/to/file.txt
    ```

12. **Розпакувати кілька файлів, що відповідають шаблону:**
    ```bash
    tar -xzvf archive.tar.gz --wildcards "*.html"
    ```

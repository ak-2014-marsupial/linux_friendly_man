`tmux` (terminal multiplexer) — це потужний інструмент, що дозволяє створювати, керувати та взаємодіяти з кількома термінальними сесіями в межах одного вікна. Це особливо корисно для роботи на віддалених серверах, оскільки сесії `tmux` продовжують працювати у фоновому режимі, навіть якщо ви відключилися.

#### **Базовий синтаксис**

```bash
tmux [команда] [прапори]
```

*   **`tmux`** (без команди): Створює нову сесію.
*   **`tmux attach`**: Підключається до останньої активної сесії.
*   **`tmux ls`**: Показує список усіх активних сесій.

---
### **Скорочені та повні команди**

Більшість команд `tmux` мають як повну, так і скорочену версію (аліас). Вони є взаємозамінними, але скорочені версії зручніші для швидкого введення в командному рядку.

Наприклад:
*   `tmux new-session` еквівалентно `tmux new`
*   `tmux attach-session` еквівалентно `tmux attach` або `tmux a`
*   `tmux list-sessions` еквівалентно `tmux ls`

У цьому документі для ясності часто використовуються повні назви команд, але в повсякденній роботі ви, ймовірно, будете віддавати перевагу скороченим.

---

### **Основні концепції**

`tmux` має ієрархічну структуру:

*   **Сесія (Session)**: Контейнер верхнього рівня, що містить одне або кілька вікон. Сесія залишається активною, доки її не буде завершено.
*   **Вікно (Window)**: Повноцінний термінал у межах сесії, схожий на вкладку в браузері.
*   **Панель (Pane)**: Розділена область всередині вікна. Одне вікно може містити кілька панелей, кожна з яких є незалежним терміналом.

---

### **Робота з `tmux`: Префікс та комбінації клавіш**

Більшість команд всередині `tmux` виконуються за допомогою комбінації клавіш, яка починається з **префікса**.

**Префікс за замовчуванням: `Ctrl+b`**

Це означає, що ви спочатку натискаєте `Ctrl+b`, відпускаєте, а потім натискаєте наступну клавішу для виконання команди.

| Комбінація | Дія |
| :--- | :--- |
| **`Ctrl+b` `d`** | **D**etach (Від'єднатися) від поточної сесії. |
| **`Ctrl+b` `s`** | Показати інтерактивний список **s**есій для перемикання. |
| **`Ctrl+b` `$`** | Перейменувати поточну сесію. |

#### **Керування вікнами**

| Комбінація | Дія |
| :--- | :--- |
| **`Ctrl+b` `c`** | **C**reate (Створити) нове вікно. |
| **`Ctrl+b` `w`** | Показати інтерактивний список **w**ікон для перемикання. |
| **`Ctrl+b` `p`** | Переключитися на **p**revious (попереднє) вікно. |
| **`Ctrl+b` `n`** | Переключитися на **n**ext (наступне) вікно. |
| **`Ctrl+b` `&`** | Закрити поточне вікно (з підтвердженням). |
| **`Ctrl+b` `,`** | Перейменувати поточне вікно. |

#### **Керування панелями**

| Комбінація | Дія |
| :--- | :--- |
| **`Ctrl+b` `%`** | Розділити поточну панель **вертикально**. |
| **`Ctrl+b` `"`** | Розділити поточну панель **горизонтально**. |
| **`Ctrl+b` `(стрілки)`** | Переміщатися між панелями. |
| **`Ctrl+b` `x`** | Закрити поточну панель (з підтвердженням). |
| **`Ctrl+b` `z`** | **Z**oom (Розгорнути) поточну панель на весь екран. Повторне натискання повертає до попереднього стану. |
| **`Ctrl+b` `(утримуючи Alt) + (стрілки)`** | Змінити розмір поточної панелі. |
| **`Ctrl+b` `{`** | Поміняти поточну панель із попередньою. |
| **`Ctrl+b` `}`** | Поміняти поточну панель із наступною. |
| **`Ctrl+b` `(пробіл)`** | Переключитися на наступний вбудований макет панелей. |

---

### **Режим копіювання (Copy Mode)**

Цей режим дозволяє прокручувати вивід у панелі та копіювати текст, подібно до роботи у `vim`.

| Комбінація | Дія |
| :--- | :--- |
| **`Ctrl+b` `[`** | Увійти в режим копіювання. |
| **`PgUp` / `PgDn`** | Прокручувати сторінками. |
| **`(стрілки)`** | Навігація по тексту. |
| **`q`** | Вийти з режиму копіювання. |
| **`Ctrl+b` `]`** | Вставити текст із внутрішнього буфера `tmux`. |

**Процес копіювання та вставки:**
1.  Натисніть `Ctrl+b` `[` для входу в режим копіювання.
2.  Перемістіть курсор до початку тексту, який хочете скопіювати.
3.  Натисніть `пробіл`, щоб почати виділення.
4.  Перемістіть курсор до кінця потрібного фрагмента.
5.  Натисніть `Enter`, щоб скопіювати виділений текст у буфер `tmux`.
6.  Перейдіть у потрібне місце та натисніть `Ctrl+b` `]`, щоб вставити скопійований текст.

---

### **Інші корисні команди**

| Комбінація | Дія |
| :--- | :--- |
| **`Ctrl+b` `t`** | Показати великий годинник у поточній панелі. |
| **`Ctrl+b` `?`** | Показати список усіх комбінацій клавіш. |
| **`Ctrl+b` `:`** | Відкрити командний рядок `tmux` для введення команд вручну. |

---
### **Приклади використання (командний рядок)**

Ці команди виконуються у вашому звичайному терміналі, а не всередині `tmux`.

1.  **Створити нову іменовану сесію:**
    ```bash
    tmux new-session -s my_project
    ```

2.  **Підключитися до іменованої сесії:**
    ```bash
    tmux attach-session -t my_project
    ```
    *Скорочений варіант:* `tmux a -t my_project`

3.  **Підключитися до сесії за її ID (наприклад, ID=0):**
    ```bash
    tmux attach-session -t 0
    ```
    *Скорочений варіант:* `tmux a -t 0`

4.  **Показати список усіх сесій:**
    ```bash
    tmux list-sessions
    ```
    *Скорочений варіант:* `tmux ls`

5.  **Завершити (вбити) іменовану сесію:**
    ```bash
    tmux kill-session -t my_project
    ```

6.  **Завершити всі сесії `tmux`:**
    ```bash
    tmux kill-server
    ```

### **Керування конкретними об'єктами: прапор `-t` (target)**

Прапор `-t` (від англ. *target* — ціль) є одним із найважливіших у `tmux`, оскільки він дозволяє вказувати, до якої саме сесії, вікна чи панелі застосувати команду. Це робить керування `tmux` гнучким і потужним, особливо у скриптах автоматизації.

**Синтаксис для націлювання:**

*   `-t <назва-сесії>`
*   `-t <назва-сесії>:<номер-вікна>`
*   `-t <назва-сесії>:<номер-вікна>.<номер-панелі>`

**Приклади:**

1.  **Надіслати команду у вказану панель:**
    Припустимо, у вас є сесія `my_project`, у ній вікно `1`, і ви хочете виконати команду `ls -l` у панелі `0` цього вікна, не перемикаючись на неї.

    ```bash
    tmux send-keys -t my_project:1.0 'ls -l' C-m
    ```
    *   `send-keys` — команда для надсилання послідовності клавіш.
    *   `-t my_project:1.0` — ціль: сесія `my_project`, вікно `1`, панель `0`.
    *   `'ls -l'` — текст, який потрібно "надрукувати".
    *   `C-m` — симуляція натискання `Enter`.

2.  **Створити нове вікно в існуючій сесії:**
    Замість того, щоб створювати нову сесію, ви можете додати вікно до вже запущеної.

    ```bash
    tmux new-window -t my_project -n 'Database'
    ```
    *   `-t my_project` — вказує, що вікно потрібно створити в сесії `my_project`.
    *   `-n 'Database'` — дає новому вікну ім'я `Database`.

3.  **Перейменувати конкретне вікно:**
    Ви можете перейменувати вікно, не перемикаючись на нього.

    ```bash
    tmux rename-window -t my_project:2 'Monitoring'
    ```
    *   Ця команда перейменує вікно з індексом `2` у сесії `my_project` на `Monitoring`.

4.  **Розділити панель у конкретному вікні:**
    ```bash
    tmux split-window -h -t my_project:1
    ```
    *   `-h` — розділити горизонтально.
    *   `-t my_project:1` — застосувати команду до вікна `1` у сесії `my_project`.

Цей прапор дозволяє керувати всіма аспектами `tmux` із командного рядка, що відкриває безмежні можливості для автоматизації робочих процесів.

### **Приклад робочого процесу**

1.  **Початок роботи:** Ви підключаєтесь до віддаленого сервера і створюєте сесію для свого проєкту.
    ```bash
    ssh user@server
    tmux new -s web_dev
    ```

2.  **Налаштування робочого простору:**
    *   У першому вікні ви запускаєте редактор коду (наприклад, `vim`).
    *   Натискаєте `Ctrl+b` `"`, щоб розділити екран горизонтально.
    *   У нижній панелі ви запускаєте сервер розробки (`npm run dev`).
    *   Натискаєте `Ctrl+b` `c`, щоб створити нове вікно для системних завдань.
    *   У цьому новому вікні ви запускаєте моніторинг логів (`tail -f logs/app.log`).

3.  **Від'єднання:** Ваша робота переривається. Ви натискаєте `Ctrl+b` `d`, щоб від'єднатися. Всі процеси (редактор, сервер, логи) продовжують працювати на сервері.

4.  **Повернення до роботи:** Через деякий час ви знову підключаєтесь до сервера і відновлюєте свою сесію.
    ```bash
    ssh user@server
    tmux attach -t web_dev
    ```
    *Ваш робочий простір з усіма вікнами, панелями та запущеними процесами відновлено в тому ж стані, в якому ви його залишили.*

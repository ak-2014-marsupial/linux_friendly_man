Утиліта `xargs` — це потужний інструмент, який читає елементи зі стандартного вводу (stdin), розділені пробілами або новими рядками, і будує з них командні рядки для виконання іншої команди. Вона є "клеєм", що дозволяє передавати вивід однієї програми на вхід іншій, особливо коли друга програма не вміє читати дані зі стандартного вводу.

#### **Базовий синтаксис**

```bash
[команда-джерело] | xargs [ключі] [команда-виконавець]
```

*   **`[команда-джерело]`**: Команда, що генерує список елементів (наприклад, `find`, `ls`, `grep`).
*   **`[ключі]`**: Параметри, що контролюють, як `xargs` будує та виконує команди.
*   **`[команда-виконавець]`**: Команда, яка буде виконана для елементів, отриманих від `xargs`.

---

### **Проблема з пробілами та її вирішення (`-0`)**

За замовчуванням `xargs` розділяє вхідні дані за пробілами, табами та символами нового рядка. Це створює серйозну проблему, якщо імена файлів містять пробіли.

**Приклад проблеми:**
Припустимо, є файл з назвою `My Document.txt`.
```bash
find . -name "*.txt" | xargs rm
```
1.  `find` виведе `./My Document.txt`.
2.  `xargs` прочитає це як два окремі елементи: `./My` та `Document.txt`.
3.  `xargs` спробує виконати `rm ./My Document.txt`, що призведе до помилки, оскільки файлів `My` та `Document.txt` не існує.

#### **Надійне рішення: `find -print0 | xargs -0`**

Це стандартний і найнадійніший спосіб спільної роботи `find` та `xargs`.

*   **`find -print0`**: Цей ключ змушує `find` розділяти знайдені шляхи не символом нового рядка, а **нульовим символом** (`\0`). Оскільки нульовий символ не може бути частиною імені файлу в Unix, це ідеальний роздільник.
*   **`xargs -0`**: Цей ключ повідомляє `xargs`, що вхідні дані розділені нульовим символом.

```bash
# Безпечне видалення всіх .txt файлів
find . -type f -name "*.txt" -print0 | xargs -0 rm
```
Ця конструкція буде коректно працювати з будь-якими іменами файлів, навіть тими, що містять пробіли, лапки та інші спеціальні символи.

---

### **Основні ключі `xargs`**

*   **`-n число`** або **`--max-args=число`**
    Виконувати команду, передаючи їй не більше `число` аргументів за один раз.
    *   *Приклад:* `echo a b c d | xargs -n 2 echo` виконає `echo a b`, а потім `echo c d`.

*   **`-I замінник`**
    Режим заміни. `xargs` виконує команду для кожного вхідного елемента окремо, підставляючи цей елемент на місце `замінника` в команді-виконавці. Часто як замінник використовують `{}`.
    *   Це схоже на `find -exec ... {} \;`, але працює з будь-яким вхідним потоком.

*   **`-p`** або **`--interactive`**
    Інтерактивний режим. Перед виконанням кожної команди `xargs` буде питати у користувача підтвердження (`y` або `n`).

*   **`-d роздільник`** або **`--delimiter=роздільник`**
    Використовувати вказаний символ як роздільник вхідних даних замість пробілів.

---

### **Приклади використання**

1.  **Просте перетворення багаторядкового виводу в однорядковий:**
    ```bash
    ls | xargs
    ```

2.  **Безпечне видалення всіх файлів `.tmp`, знайдених `find`:**
    ```bash
    find . -type f -name "*.tmp" -print0 | xargs -0 rm
    ```

3.  **Знайти всі файли `.jpeg` і перейменувати їх на `.jpg`:**
    ```bash
    find . -type f -name "*.jpeg" -print0 | xargs -0 -I {} mv {} {}.jpg
    ```
    *Тут ми не можемо просто замінити розширення, тому що `{}` містить повну назву. Правильніше так:*
    ```bash
    find . -type f -name "*.jpeg" -print0 | while IFS= read -r -d '' file; do
        mv -- "$file" "${file%.jpeg}.jpg"
    done
    ```
    *Але для демонстрації `-I` можна зробити так:*
    ```bash
    find . -type f -name "*.jpeg" | xargs -I {} sh -c 'mv "$1" "${1%.jpeg}.jpg"' _ {}
    ```

4.  **Створити резервні копії всіх файлів `.conf` (використовуючи `-I`):**
    ```bash
    find /etc -name "*.conf" -print0 | xargs -0 -I {} cp {} {}.bak
    ```

5.  **Завантажити список URL-адрес із файлу `urls.txt` за допомогою `wget`:**
    ```bash
    cat urls.txt | xargs -n 1 wget
    ```
    *`-n 1` гарантує, що `wget` буде викликаний для кожної URL-адреси окремо.*

6.  **Інтерактивне видалення всіх файлів у кошику:**
    ```bash
    find ~/.local/share/Trash/files -print0 | xargs -0 -p rm -rf
    ```

7.  **Змінити права доступу для всіх файлів, знайдених `grep`:**
    ```bash
    grep -rl "SECRET_KEY" /var/www -print0 | xargs -0 chmod 600
    ```
    *Тут `grep -l` виводить імена файлів, де знайдено збіг.*

8.  **Підрахувати кількість рядків у всіх файлах `.js`:**
    ```bash
    find . -name "*.js" -print0 | xargs -0 wc -l
    ```
    *`xargs` передасть список усіх файлів команді `wc -l` за один раз, що набагато ефективніше, ніж викликати `wc` для кожного файлу.*

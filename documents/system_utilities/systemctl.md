Команда `systemctl` (system control) — це основний інструмент для керування `systemd`, системним та сервісним менеджером у більшості сучасних дистрибутивів Linux. Вона використовується для запуску, зупинки, перезапуску сервісів, перевірки їхнього статусу, керування автозавантаженням та аналізу стану системи.

#### **Базовий синтаксис**

```bash
systemctl [КОМАНДА] [НАЗВА_СЕРВІСУ]
```
*   `[КОМАНДА]` — дія, яку потрібно виконати (наприклад, `start`, `stop`, `status`).
*   `[НАЗВА_СЕРВІСУ]` — ім'я сервісу, яким потрібно керувати (наприклад, `nginx.service`). Розширення `.service` можна не вказувати.

---

### **Основні команди для керування сервісами**

| Команда | Опис |
| :--- | :--- |
| `start` | Запустити сервіс. |
| `stop` | Зупинити сервіс. |
| `restart` | Перезапустити сервіс (зупинити і знову запустити). |
| `reload` | Перезавантажити конфігурацію сервісу без його повної зупинки. |
| `daemon-reload` | Перечитати конфігураційні файли `systemd`. Потрібно після зміни юніт-файлів. |
| `status` | Показати детальний статус сервісу. |
| `enable` | Додати сервіс в автозавантаження при старті системи. |
| `disable` | Видалити сервіс з автозавантаження. |
| `is-active` | Перевірити, чи запущений сервіс зараз. |
| `is-enabled` | Перевірити, чи доданий сервіс в автозавантаження. |

---

### **Особливі команди**

#### `daemon-reload`

Ця команда не перезапускає жоден сервіс. Замість цього вона змушує `systemd` перечитати всі свої конфігураційні файли (юніти), які знаходяться в директоріях, таких як `/etc/systemd/system/` та `/lib/systemd/system/`.

**Коли це потрібно?**

Використовуйте `systemctl daemon-reload` щоразу, коли ви:
- Створюєте новий юніт-файл (наприклад, `my-app.service`).
- Вносите зміни в існуючий юніт-файл.
- Видаляєте юніт-файл.

`systemd` кешує конфігурацію для швидкості. Без цієї команди `systemd` не знатиме про ваші зміни до наступного перезавантаження системи.

**Приклад:**
Ви створили файл `/etc/systemd/system/my-custom.service`. Щоб `systemd` дізнався про нього, виконайте:
```bash
sudo systemctl daemon-reload
```
Після цього ви можете запустити або додати в автозавантаження новий сервіс:
```bash
sudo systemctl start my-custom.service
sudo systemctl enable my-custom.service
```

---

### **Розшифровка виводу `systemctl status`**

```
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
     Active: active (running) since Fri 2023-10-27 10:00:00 EET; 1 day 2h ago
       Docs: man:nginx(8)
   Main PID: 1234 (nginx)
      Tasks: 2 (limit: 4617)
     Memory: 12.3M
        CPU: 45s
     CGroup: /system.slice/nginx.service
             ├─1234 /usr/sbin/nginx -g daemon on; master_process on;
             └─1235 /usr/sbin/nginx -g daemon on; master_process on;
```

*   **`Loaded`**: Показує шлях до файлу сервісу (`.service`), чи він в автозавантаженні (`enabled`/`disabled`).
*   **`Active`**: Стан сервісу:
    *   `active (running)` — сервіс запущений і працює.
    *   `inactive (dead)` — сервіс зупинений.
    *   `failed` — сервіс не зміг запуститися.
    *   `reloading` — сервіс перезавантажує конфігурацію.
*   **`Docs`**: Посилання на документацію.
*   **`Main PID`**: ID головного процесу сервісу.
*   **`Tasks`**: Кількість задач (процесів/потоків), створених сервісом.
*   **`Memory`**: Обсяг пам'яті, що використовується.
*   **`CGroup`**: Інформація про контрольну групу, яка ізолює ресурси процесу.
*   **Логи**: Нижче виводяться останні записи з журналу, що стосуються цього сервісу.

---

### **Приклади використання**

1.  **Перевірити статус веб-сервера Nginx:**
    ```bash
    systemctl status nginx
    ```

2.  **Запустити сервіс SSH:**
    ```bash
    sudo systemctl start sshd
    ```
    *Для керування сервісами потрібні права суперкористувача (`sudo`).*

3.  **Додати сервіс у автозавантаження:**
    ```bash
    sudo systemctl enable cron
    ```
    *Тепер сервіс `cron` буде запускатися автоматично при кожному завантаженні системи.*

4.  **Перезапустити сервіс після зміни конфігурації:**
    ```bash
    sudo systemctl restart networking
    ```

5.  **Показати всі запущені сервіси:**
    ```bash
    systemctl list-units --type=service --state=running
    ```

6.  **Показати всі сервіси, які не вдалося запустити:**
    ```bash
    systemctl --failed --type=service
    ```

---

### **Керування системою**

`systemctl` також використовується для керування станом самої системи.

| Команда | Опис |
| :--- | :--- |
| `reboot` | Перезавантажити систему. |
| `poweroff` | Вимкнути живлення. |
| `suspend` | Перевести систему в режим сну (збереження стану в RAM). |
| `hibernate` | Перевести систему в режим глибокого сну (збереження стану на диск). |
| `rescue` | Увійти в режим відновлення (однокористувацький режим). |
| `get-default` | Показати ціль за замовчуванням (наприклад, `graphical.target`). |
| `set-default` | Встановити ціль за замовчуванням (наприклад, `multi-user.target` для консольного режиму). |

**Приклад:**
Перемкнутися в консольний режим без перезавантаження.
```bash
sudo systemctl isolate multi-user.target
```

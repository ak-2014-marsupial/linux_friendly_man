# Посібник з використання утиліти `grep`

Утиліта `grep` (Global Regular Expression Print) — це потужний інструмент командного рядка для пошуку текстових даних. Вона зчитує вміст файлів або стандартний ввід і виводить рядки, що відповідають заданому шаблону.

#### **Базовий синтаксис**

```bash
grep [опції] "шаблон_пошуку" [ім'я_файлу...]
```

*   **`[опції]`**: Ключі, що змінюють поведінку `grep` (наприклад, `-i` для ігнорування регістру).
*   **`"шаблон_пошуку"`**: Текст або регулярний вираз, який потрібно знайти. Рекомендується брати його в лапки.
*   **`[ім'я_файлу...]`**: Один або кілька файлів, у яких виконується пошук. Якщо не вказано, `grep` читає зі стандартного вводу.

---

### **Основні опції (ключі) для пошуку**

*   **`-i` (--ignore-case)**
    Ігнорувати регістр символів.
    *   *Приклад:* `grep -i "error" log.txt` знайде `ERROR`, `error` та `Error`.

*   **`-v` (--invert-match)**
    Інвертувати пошук: вивести рядки, які **НЕ** відповідають шаблону.
    *   *Приклад:* `grep -v "DEBUG" app.log` покаже всі рядки, крім тих, що містять "DEBUG".

*   **`-r` або `-R` (--recursive)**
    Рекурсивний пошук у всіх файлах вказаної директорії та її піддиректоріях.
    *   *Приклад:* `grep -r "API_KEY" ./config`

*   **`-l` (--files-with-matches)**
    Вивести лише імена файлів, у яких знайдено збіги, а не самі рядки.
    *   *Приклад:* `grep -l "import React" src/**/*.js`

*   **`-c` (--count)**
    Вивести не рядки зі збігами, а їхню кількість у кожному файлі.

*   **`-n` (--line-number)**
    Показувати номер рядка перед кожним знайденим збігом.

*   **`-w` (--word-regexp)**
    Шукати лише цілі слова. Шаблон `cat` не знайде збігу в слові `concatenate`.
    *   *Приклад:* `grep -w "error" messages.log`

*   **`-E` (--extended-regexp)**
    Вмикає підтримку розширених регулярних виразів (ERE). Дозволяє використовувати метасимволи `+`, `?`, `|`, `()` без екранування.
    *   *Приклад:* `grep -E "error|warn" system.log`

*   **`-A N`, `-B N`, `-C N`**
    Показати контекст навколо знайденого рядка:
    *   **`-A N` (--after-context=N)**: показати `N` рядків **після** збігу.
    *   **`-B N` (--before-context=N)**: показати `N` рядків **до** збігу.
    *   **`-C N` (--context=N)**: показати `N` рядків **до і після** збігу.

---
### **Регулярні вирази в `grep`**

`grep` є надзвичайно потужним завдяки підтримці регулярних виразів. Ось базові метасимволи:

| Символ | Пояснення | Приклад |
| :--- | :--- | :--- |
| **`^`** | Початок рядка. | `^Error` — рядки, що починаються з "Error". |
| **`$`** | Кінець рядка. | `\.log$` — рядки, що закінчуються на ".log". |
| **`.`** | Будь-який один символ. | `b.g` знайде `big`, `beg`, `b_g`. |
| **`*`** | Нуль або більше повторень попереднього символа. | `a*b` знайде `b`, `ab`, `aaab`. |
| **`[]`** | Будь-який символ із зазначеного набору. | `[aeiou]` знайде будь-яку голосну. |
| **`|`** | Оператор "АБО" (потрібен ключ `-E`). | `grep -E "apple|orange"` |

---
### **Використання `grep` з іншими командами (через `|`)**

`grep` часто використовується для фільтрації виводу інших команд.

*   **`команда | grep "шаблон"`**
    *   Символ `|` (пайп) передає стандартний вивід `команди` на стандартний ввід `grep`.
    *   `grep` фільтрує цей вивід, показуючи лише ті рядки, що відповідають шаблону.

**Приклад:**
Якщо ви хочете перевірити, чи запущено процес `nginx`:
```bash
ps aux | grep "nginx"
```
1.  `ps aux` виводить список усіх запущених процесів.
2.  `grep "nginx"` отримує цей список і показує лише ті рядки, де є слово "nginx".

---
### **Розширений список прикладів використання**

#### Простий пошук
1.  **Знайти текст у файлі:**
    ```bash
    grep "database connection failed" /var/log/app.log
    ```

2.  **Знайти текст у кількох файлах:**
    ```bash
    grep "User-Agent" access.log-1 access.log-2
    ```

3.  **Знайти текст, ігноруючи регістр:**
    ```bash
    grep -i "authorization" api.gateway.log
    ```

#### Рекурсивний пошук та робота з файлами
4.  **Знайти всі файли в поточній директорії, що містять "TODO:":**
    ```bash
    grep -r "TODO:" .
    ```

5.  **Знайти, в яких файлах конфігурації є налаштування `PORT`:**
    ```bash
    grep -l "PORT" /etc/**/*.conf
    ```

6.  **Підрахувати кількість помилок у лог-файлі:**
    ```bash
    grep -c "ERROR" system.log
    ```

#### Пошук з регулярними виразами
7.  **Знайти рядки, що починаються зі слова `Warning`:**
    ```bash
    grep "^Warning" system.log
    ```

8.  **Знайти рядки, що містять IP-адресу (спрощений шаблон):**
    ```bash
    grep -E "[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}" access.log
    ```

9.  **Знайти порожні рядки у файлі:**
    ```bash
    grep "^$" config.yaml
    ```

#### Комбінації та розширені випадки
10. **Знайти всі рядки, що НЕ містять коментарів (`#`):**
    ```bash
    grep -v "^#" /etc/nginx/nginx.conf
    ```

11. **Показати помилку та 2 рядки контексту після неї:**
    ```bash
    grep -A 2 "Exception" error.log
    ```

12. **Знайти файли, що містять або "denied", або "failed":**
    ```bash
    grep -r -l -E "denied|failed" /var/log/
    ```

13. **Вивести список пакетів, встановлених через `apt`, і знайти `python`:**
    ```bash
    apt list --installed | grep "python"
    ```

14. **Знайти всі файли `.js`, які імпортують `useState` з `react`:**
    ```bash
    find . -name "*.js" -exec grep -l "useState" {} +
    ```
    *(Приклад комбінації `find` та `grep` для складних завдань).*

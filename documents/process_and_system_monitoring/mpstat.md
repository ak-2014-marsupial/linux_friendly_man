# mpstat

Утиліта `mpstat` (Multi-Processor Statistics) — це команда з пакету `sysstat`, яка використовується для моніторингу продуктивності процесорів у багатопроцесорних системах. Вона дозволяє переглядати статистику використання для кожного ядра окремо або для всіх разом, що є корисним для виявлення незбалансованого навантаження.

#### **Базовий синтаксис**

```bash
mpstat [опції] [інтервал] [кількість]
```

*   **`[інтервал]`**: Інтервал часу в секундах між оновленнями даних.
*   **`[кількість]`**: Кількість оновлень, після яких команда завершить роботу.

--- 

### **Опис полів виводу**

Вивід `mpstat` містить детальну інформацію про час, витрачений CPU на різні завдання.

| Колонка | Опис |
| :--- | :--- |
| **CPU** | Номер процесорного ядра (або `all` для середнього значення по всіх ядрах). |
| **%usr** | Відсоток часу, витраченого на виконання коду на рівні користувача (програми). |
| **%nice** | Відсоток часу, витраченого на виконання коду користувача з низьким пріоритетом. |
| **%sys** | Відсоток часу, витраченого на виконання коду на рівні ядра системи. |
| **%iowait** | Відсоток часу, протягом якого процесор простоював в очікуванні завершення операції вводу/виводу. |
| **%irq** | Відсоток часу, витраченого на обробку апаратних переривань. |
| **%soft** | Відсоток часу, витраченого на обробку програмних переривань. |
| **%steal** | Відсоток часу, "вкраденого" у віртуальної машини гіпервізором. |
| **%guest** | Відсоток часу, витраченого на роботу гостьових віртуальних машин. |
| **%idle** | Відсоток часу, протягом якого процесор був у простої і не очікував на I/O. |

--- 

### **Основні ключі запуску (опції)**

| Ключ | Пояснення |
| :--- | :--- |
| **`-P { [номер_ядра] \| ALL }`** | Показати статистику для конкретного ядра (наприклад, `-P 0`), для списку ядер (наприклад, `-P 0,2`) або для всіх ядер окремо (`-P ALL`). |
| **`-A`** | Показати всю доступну інформацію (еквівалентно `-I ALL -u -P ALL`). |
| **`-I { SUM \| CPU \| ALL }`** | Показати статистику по перериваннях. |
| **`-u`** | Показати статистику використання CPU (дія за замовчуванням). |

--- 

### **Приклади використання**

1.  **Показати середню статистику по всіх CPU з моменту завантаження системи:**
    ```bash
    mpstat
    ```

2.  **Показати статистику для кожного ядра окремо:**
    ```bash
    mpstat -P ALL
    ```

3.  **Показати статистику лише для першого ядра (CPU 0):**
    ```bash
    mpstat -P 0
    ```

4.  **Моніторити всі ядра кожні 2 секунди (5 разів):**
    ```bash
    mpstat -P ALL 2 5
    ```

5.  **Показати детальну статистику по перериваннях для кожного ядра:**
    ```bash
    mpstat -I ALL -P ALL
    ```

6.  **Моніторити ядро №1 щосекунди:**
    ```bash
    mpstat -P 1 1
    ```

7.  **Показати всю доступну інформацію по всіх ядрах:**
    ```bash
    mpstat -A
    ```

# iotop

`iotop` (I/O top) — це інтерактивна утиліта, схожа на `top`, але призначена для моніторингу дискових операцій вводу/виводу (I/O) в реальному часі. Вона дозволяє побачити, які саме процеси активно читають дані з диска або записують на нього.

**Примітка:** Для роботи `iotop` потрібні права адміністратора (`sudo`) та відповідні налаштування ядра (зазвичай увімкнені в сучасних дистрибутивах).

#### **Базовий синтаксис**

```bash
sudo iotop [опції]
```

--- 

### **Розуміння інтерфейсу**

Інтерфейс `iotop` складається з двох основних частин:

1.  **Верхні рядки:** показують сумарну швидкість читання (`Total DISK READ`) та запису (`Total DISK WRITE`) для всієї системи.
2.  **Основна таблиця:** список процесів, відсортованих за використанням I/O.

| Колонка | Опис |
| :--- | :--- |
| **TID** | Ідентифікатор процесу або потоку (Thread ID). |
| **PRIO** | Пріоритет планування I/O. |
| **USER** | Користувач, від імені якого запущено процес. |
| **DISK READ** | Швидкість читання з диска для даного процесу. |
| **DISK WRITE** | Швидкість запису на диск для даного процесу. |
| **SWAPIN** | Відсоток часу, який процес провів, очікуючи на завантаження даних зі swap. |
| **IO>** | Відсоток часу, який процес провів, очікуючи на завершення операцій вводу/виводу. |
| **COMMAND** | Назва команди (процесу). |

--- 

### **Інтерактивні команди**

Під час роботи `iotop` можна використовувати такі клавіші:

| Клавіша | Дія |
| :--- | :--- |
| **Стрілки вліво/вправо** | Змінити колонку для сортування. |
| **`r`** | Інвертувати порядок сортування. |
| **`o`** | (`--only`) Показати лише ті процеси, які на даний момент виконують I/O. |
| **`p`** | (`--processes`) Переключитися між відображенням усіх потоків та лише процесів. |
| **`a`** | (`--accumulated`) Переключитися між показом поточної швидкості та сукупного обсягу I/O з моменту запуску. |
| **`q`** | Вийти з програми. |

--- 

### **Основні ключі запуску (опції)**

| Ключ | Пояснення |
| :--- | :--- |
| **`-o`, `--only`** | Показати лише процеси або потоки, які фактично виконують I/O. |
| **`-b`, `--batch`** | Запустити в неінтерактивному режимі, що зручно для запису логів. |
| **`-n [N]`, `--iter=[N]`** | Виконати вказану кількість `[N]` оновлень, після чого завершити роботу. |
| **`-d [сек]`, `--delay=[сек]`** | Встановити затримку між оновленнями в секундах. |
| **`-p [PID]`, `--pid=[PID]`** | Відстежувати лише вказаний процес (за його PID). |
| **`-u [USER]`, `--user=[USER]`** | Відстежувати лише процеси вказаного користувача. |
| **`-P`, `--processes`** | Показувати лише процеси, а не всі потоки. |
| **`-a`, `--accumulated`** | Показувати накопичений обсяг I/O замість швидкості. |
| **`-k`, `--kilobytes`** | Використовувати кілобайти як одиницю виміру (замість динамічного вибору). |

--- 

### **Приклади використання**

1.  **Запустити моніторинг у стандартному інтерактивному режимі:**
    ```bash
    sudo iotop
    ```

2.  **Показати лише ті процеси, які зараз активно працюють з диском:**
    ```bash
    sudo iotop -o
    ```

3.  **Запустити в неінтерактивному режимі (наприклад, для запису у файл):**
    ```bash
    sudo iotop -b > iotop_log.txt
    ```

4.  **Виконати 5 оновлень з інтервалом у 2 секунди, а потім вийти:**
    ```bash
    sudo iotop -n 5 -d 2
    ```

5.  **Відстежувати дискову активність лише для користувача `www-data`:**
    ```bash
    sudo iotop -u www-data
    ```

6.  **Моніторити лише процеси (без потоків), які зараз використовують диск:**
    ```bash
    sudo iotop -oP
    ```

7.  **Показати накопичений обсяг I/O замість поточної швидкості:**
    ```bash
    sudo iotop -a
    ```

# pidstat

Утиліта `pidstat` — це потужний інструмент з пакету `sysstat`, призначений для моніторингу окремих процесів та потоків, що керуються ядром Linux. Вона дозволяє відстежувати використання CPU, пам'яті, операцій вводу/виводу (I/O) та інші метрики для конкретних завдань.

#### **Базовий синтаксис**

```bash
pidstat [опції] [інтервал] [кількість]
```

*   **`[інтервал]`**: Інтервал часу в секундах між оновленнями даних.
*   **`[кількість]`**: Кількість оновлень, після яких команда завершить роботу.

--- 

### **Основні ключі (опції)**

#### **Загальні опції**

| Ключ | Пояснення |
| :--- | :--- |
| **`-p { PID | SELF | ALL }`** | Вказати процес для моніторингу. Можна передати `PID`, `SELF` (сам процес `pidstat`) або `ALL` (усі процеси). |
| **`-C "назва"`** | Відстежувати лише процеси, назва яких містить вказаний рядок. |
| **`-U [користувач]`** | Показувати статистику для процесів, запущених конкретним користувачем. |
| **`-h`** | Виводити статистику I/O у більш читабельному форматі (наприклад, в КБ/МБ). |

#### **Типи звітів**

| Ключ | Пояснення |
| :--- | :--- |
| (без ключа) | **Звіт по CPU (за замовчуванням).** Показує використання процесорного часу (`%usr`, `%system`, `%guest`, `%CPU`). |
| **`-d`** | **Звіт по I/O.** Показує статистику дискових операцій (`kB_rd/s`, `kB_wr/s`). |
| **`-r`** | **Звіт по пам'яті.** Показує помилки сторінок (`minflt/s`, `majflt/s`) та використання пам'яті (`VSZ`, `RSS`, `%MEM`). |
| **`-w`** | **Звіт по перемиканнях контексту.** Показує кількість добровільних (`cswch/s`) та примусових (`nvcswch/s`) перемикань контексту. |
| **`-s`** | **Звіт по стеку.** Показує використання стека процесу (`StkSize`, `StkRef`). |
| **`-t`** | **Звіт по потоках (threads).** Показує статистику для кожного потоку окремо. Можна комбінувати з іншими звітами. |

--- 

### **Приклади використання**

1.  **Показати базову статистику CPU для всіх активних процесів:**
    *Перший звіт показує середні значення з моменту завантаження системи.*
    ```bash
    pidstat
    ```

2.  **Моніторити використання CPU кожні 2 секунди:**
    ```bash
    pidstat 2
    ```

3.  **Показати статистику I/O для всіх процесів:**
    ```bash
    pidstat -d
    ```

4.  **Показати статистику використання пам'яті:**
    ```bash
    pidstat -r
    ```

5.  **Моніторити використання CPU для процесу з PID 1234 кожну секунду:**
    ```bash
    pidstat -p 1234 1
    ```

6.  **Відстежувати статистику I/O для всіх процесів, у назві яких є "chrome":**
    ```bash
    pidstat -d -C "chrome"
    ```

7.  **Показати статистику CPU для кожного потоку процесу з PID 5678:**
    ```bash
    pidstat -t -p 5678
    ```

8.  **Показати статистику перемикань контексту для всіх процесів:**
    ```bash
    pidstat -w
    ```

9.  **Комбінувати звіти: показати статистику пам'яті та I/O кожні 5 секунд:**
    ```bash
    pidstat -r -d 5
    ```

10. **Показати повну статистику (CPU, пам'ять, I/O, стек, потоки) для процесу з PID 1234:**
    ```bash
    pidstat -urdwt -p 1234
    ```

Команда `ps` (process status) використовується для отримання інформації про поточні процеси, запущені в системі. Це потужний інструмент для моніторингу та діагностики.

`ps` підтримує три основні стилі синтаксису: **BSD** (без дефіса, наприклад, `ps aux`), **POSIX/System V** (з одним дефісом, наприклад, `ps -ef`) та **GNU** (з двома дефісами, наприклад, `--forest`). Всі вони широко використовуються, іноді навіть у змішаному вигляді.

#### **Базовий синтаксис**

```bash
ps [опції]
```

### **Стилі опцій (ключів)**

Команда `ps` підтримує кілька стилів синтаксису для опцій. Розуміння цих стилів є ключовим для ефективного використання команди.

#### 1. Стиль POSIX (UNIX) — З одним дефісом (`-`)
Цей стиль є стандартом для більшості UNIX-подібних систем. Опції передаються як окремі аргументи і починаються з дефіса.

| Ключ | Повна назва (GNU) | Опис |
| :--- | :--- | :--- |
| `-A`, `-e` | `--every-process` | Вибрати всі процеси в системі. |
| `-f` | `--full` | Повний формат виводу. Включає UID, PID, PPID, час запуску, термінал, час CPU та команду. |
| `-l` | `--long` | Довгий (технічний) формат. Надає більше деталей, як-от статус процесу, пріоритет, пам'ять. |
| `-p <PID>` | `--pid <PID>` | Вибрати процес за його ідентифікатором (PID). |
| `-u <user>` | `--user <user>` | Вибрати процеси, що належать вказаному користувачу. |
| `-o <format>` | `--format <format>` | Дозволяє вказати, які стовпці відображати (наприклад, `-o pid,ppid,cmd`). |

**Приклад:**
```bash
ps -ef
```
*Команда показує всі (`-e`) процеси в повному (`-f`) форматі.*

#### 2. Стиль BSD — Без дефіса
Цей стиль походить із систем BSD і є дуже популярним у Linux для швидкого огляду стану системи. Опції можна групувати.

| Ключ | Опис |
| :--- | :--- |
| `a` | Показати процеси всіх користувачів, зазвичай ті, що прив'язані до термінала. |
| `u` | Надати детальний, орієнтований на користувача формат (USER, PID, %CPU, %MEM, VSZ, RSS, TTY, STAT, START, TIME, COMMAND). |
| `x` | Включити у вивід процеси, що не мають керуючого термінала (наприклад, системні демони). |
| `w` | Широкий формат виводу, щоб не обрізати довгі командні рядки. Можна використовувати двічі (`ww`) для ще ширшого виводу. |
| `r` | Обмежити вивід лише процесами, що виконуються в даний момент (статус `Running`). |

**Приклад:**
```bash
ps aux
```
*Найпопулярніша комбінація: показати процеси всіх користувачів (`a`), у детальному форматі (`u`), включно з тими, що не прив'язані до термінала (`x`).*

#### 3. Стиль GNU — З двома дефісами (`--`)
Цей стиль використовує довгі, зрозумілі імена опцій.

| Ключ | Опис |
| :--- | :--- |
| `--forest` | Відобразити процеси у вигляді дерева, показуючи батьківсько-дочірні зв'язки. |
| `--sort` | Сортувати вивід за вказаним стовпцем (наприклад, `--sort=-%mem` для сортування за спаданням використання пам'яті). |
| `--help` | Показати довідкову інформацію. |

**Важливо:** Стилі можна змішувати, але це не завжди рекомендовано. Комбінації `ps aux` та `ps -ef` є стандартними та найнадійнішими для отримання повної інформації про процеси.

--- 

### **Основні опції та їх комбінації**

| Опція/Комбінація | Пояснення |
| :--- | :--- |
| **`ps aux`** (BSD-стиль) | **Найпопулярніша комбінація.** Показати всі процеси (`a`), що належать усім користувачам (`x`), включаючи ті, що не прив'язані до термінала, з детальним описом (`u`). |
| **`ps -ef`** (System V-стиль) | Показати всі процеси (`-e`) у повному форматі (`-f`). Дуже схоже на `aux`, але з іншим форматом виводу. |
| **`ps -u ім'я_користувача`** | Показати всі процеси, запущені вказаним користувачем. |
| **`ps -p PID`** | Показати інформацію про процес із конкретним ID (PID). |
| **`ps --forest`** | Показати процеси у вигляді дерева, що ілюструє зв'язки між батьківськими та дочірніми процесами. |

--- 

### **Розшифровка виводу `ps aux`**

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1 169444 13280 ?        Ss   Aug29   0:02 /sbin/init
myuser    1234  0.5  2.1 123456 87654 ?        Sl   10:30   0:55 /usr/bin/firefox
```

*   **`USER`**: Користувач, від імені якого запущено процес.
*   **`PID`**: Ідентифікатор процесу (Process ID). Унікальний номер.
*   **`%CPU`**: Відсоток використання процесорного часу.
*   **`%MEM`**: Відсоток використання оперативної пам'яті.
*   **`VSZ`**: Віртуальний розмір процесу в кілобайтах.
*   **`RSS`**: Реальний розмір пам'яті, зайнятий процесом.
*   **`TTY`**: Термінал, до якого прив'язаний процес (`?` означає, що процес не прив'язаний до термінала).
*   **`STAT`**: Статус процесу (`S` — спить, `s` — лідер сесії, `l` — багатопотоковий, `R` — виконується, `Z` — зомбі).
*   **`START`**: Час запуску процесу.
*   **`TIME`**: Загальний час роботи процесора, витрачений на процес.
*   **`COMMAND`**: Команда, якою було запущено процес.

--- 

### **Приклади використання**

1.  **Показати всі процеси в системі (найчастіший випадок):**
    ```bash
    ps aux
    ```

2.  **Знайти конкретний процес за допомогою `grep`:**
    Наприклад, знайдемо процес веб-сервера Nginx.
    ```bash
    ps aux | grep nginx
    ```
    *Вивід може містити і сам процес `grep`. Щоб його виключити, використовують такий трюк: `ps aux | grep '[n]ginx'`.*

3.  **Показати процеси у вигляді дерева:**
    Це допомагає зрозуміти, який процес породив інший.
    ```bash
    ps aux --forest
    ```

4.  **Відсортувати процеси за використанням пам'яті:**
    ```bash
    ps aux --sort=-%mem | head -n 10
    ```
    *Ця команда покаже 10 процесів, які споживають найбільше пам'яті.*

5.  **Відсортувати процеси за використанням CPU:**
    ```bash
    ps aux --sort=-%cpu | head -n 10
    ```

6.  **Показати тільки PID та команду для всіх процесів:**
    ```bash
    ps -e -o pid,comm
    ```
    *Опція `-o` дозволяє налаштувати формат виводу.*

---

### **Продвинуті приклади**

1.  **Вивести всі процеси, але тільки стовпці PID, Parent PID, Command, CPU usage, Memory usage:**
    Опція `-o` (або `o`) дозволяє вказати, які стовпці виводити.

    ```bash
    ps -eo pid,ppid,cmd,%cpu,%mem
    ```
    *   `pid`: Process ID
    *   `ppid`: Parent Process ID
    *   `cmd`: Команда
    *   `%cpu`: Використання CPU
    *   `%mem`: Використання пам'яті

2.  **Відсортуйте вивід пункту 1 по використанню CPU за зростанням:**
    Для сортування використовується опція `--sort`. За замовчуванням сортування йде за зростанням.

    ```bash
    ps -eo pid,ppid,cmd,%cpu,%mem --sort=%cpu
    ```

3.  **Відсортуйте вивід пункту 1 по використанню пам'яті за зменшенням:**
    Щоб сортувати за зменшенням, перед назвою стовпця ставиться знак мінус (`-`).

    ```bash
    ps -eo pid,ppid,cmd,%cpu,%mem --sort=-%mem
    ```

---

### **STANDARD FORMAT SPECIFIERS**

Опція `-o` дозволяє форматувати вивід `ps`. Нижче наведено список деяких популярних специфікаторів формату.

| Специфікатор | Опис |
| :--- | :--- |
| `pid` | ID процесу |
| `ppid` | ID батьківського процесу |
| `user` | Ім'я користувача, який запустив процес |
| `euser` | Ефективне ім'я користувача |
| `group` | Група, до якої належить процес |
| `comm` | Назва команди (виконуваний файл) |
| `args` | Повна команда з аргументами |
| `%cpu` | Використання CPU у відсотках |
| `%mem` | Використання оперативної пам'яті у відсотках |
| `vsz` | Віртуальний розмір процесу в кілобайтах (KiB) |
| `rss` | Реальний розмір пам'яті (Resident Set Size) |
| `tty` | Керуючий термінал |
| `stat` | Статус процесу (R - виконується, S - спить, Z - зомбі) |
| `start` | Час запуску процесу |
| `time` | Загальний час використання CPU |
| `ni` | "Nice" значення (пріоритет планування) |
| `psr` | Процесор, на якому виконується процес |
| `wchan` | Назва функції ядра, в якій "спить" процес |

**Приклад комбінування:**

```bash
ps -eo pid,user,%cpu,%mem,comm
```
Ця команда виведе ID процесу, користувача, відсоток використання CPU та пам'яті, а також назву команди.

# Посібник з утиліти `du`

`du` (disk usage) — це стандартна утиліта командного рядка, яка використовується для оцінки та відображення дискового простору, зайнятого файлами та директоріями.

### **Ключова концепція**

`du` працює рекурсивно: вона проходить по всіх піддиректоріях вказаного шляху, підсумовує розміри файлів у них і показує розмір кожної піддиректорії, а в кінці — загальний розмір.

За замовчуванням, `du` показує розміри в блоках по 1 кілобайту, що не завжди зручно для читання. Тому її майже завжди використовують з опцією `-h`.

#### **Базовий синтаксис**

```bash
du [опції] [шлях_до_файлу_або_директорії]
```

Якщо шлях не вказано, `du` аналізує поточну директорію.

---

### **Основні опції**

| Опція | Пояснення |
| :--- | :--- |
| **`-h`** | **(Human-readable)**. **Найкорисніша опція.** Показувати розміри у людино-читабельному форматі (наприклад, `4.0K`, `2.5M`, `1.2G`). |
| **`-s`** | **(Summarize)**. Показувати лише підсумковий розмір для кожного аргументу, а не для кожної піддиректорії. Ідеально для отримання загального розміру однієї директорії. |
| **`-a`** | **(All)**. Показувати розмір не лише директорій, але й кожного окремого файлу. |
| **`-c`** | **(Total)**. В кінці виводу додати рядок `total` із загальною сумою розмірів усіх аргументів. |
| **`--max-depth=N`** | Показувати розмір директорій, лише якщо вони знаходяться на глибині `N` або менше. `--max-depth=1` покаже розмір лише директорій першого рівня вкладеності. |
| **`--exclude=[шаблон]`** | Виключити з підрахунку файли або директорії, що відповідають шаблону. |

---

### **Практичні приклади**

1.  **Показати розмір поточної директорії та її піддиректорій:**
    ```bash
    du -h
    ```

2.  **Дізнатися загальний розмір конкретної директорії (найпоширеніший випадок використання):**
    ```bash
    du -sh /var/log
    # s - summarize, h - human-readable
    ```

3.  **Дізнатися розмір кількох директорій та їхню загальну суму:**
    ```bash
    du -shc /var/log /home/user/Documents
    ```

4.  **Знайти найбільші директорії в поточному місці (дуже корисна комбінація):**
    ```bash
    du -h --max-depth=1 | sort -hr
    ```
    *   **`du -h --max-depth=1`**: показує розміри всіх файлів та директорій на поточному рівні, не заглиблюючись далі.
    *   **`| sort -hr`**: передає цей вивід команді `sort`, яка сортує його за людино-читабельними числами (`-h`) у зворотному порядку (`-r`), показуючи найбільші елементи першими.

5.  **Показати розмір усіх файлів та директорій:**
    ```bash
    du -ah
    ```

6.  **Порахувати розмір домашньої директорії, виключаючи кеш браузера:**
    ```bash
    du -sh --exclude="~/.cache"
    ```

### **`du` чи `df`?**

Ці дві команди часто плутають, але вони виконують різні завдання.

| Критерій | `du` (disk usage) | `df` (disk free) |
| :--- | :--- | :--- |
| **Що вимірює?** | Простір, зайнятий **конкретними файлами та директоріями**. | **Загальний** вільний та використаний простір на **файловій системі (диску/розділі)**. |
| **Як працює?** | Рекурсивно обходить директорії та підсумовує розміри файлів. | Запитує у ядра системи загальну статистику по точці монтування. |
| **Аналогія** | Зважування **вмісту** конкретної коробки на складі. | Запитання, скільки **всього місця** залишилося на всьому складі. |

**Чому `du /` може показувати менше, ніж `df /`?**
Це нормально. `du` підсумовує розмір файлів, до яких має доступ. `df` показує, скільки блоків на диску виділено файловою системою. Різниця може виникати через:
*   Файли, які були видалені, але ще використовуються якимось процесом (місце ще не звільнено).
*   Простір, зарезервований самою файловою системою для своїх потреб (журнал, inode тощо).

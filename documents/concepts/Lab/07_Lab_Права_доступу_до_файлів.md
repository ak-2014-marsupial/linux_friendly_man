# Лабораторна робота: Права доступу до файлів

## Пункт 1. Підготовка

> Створіть директорію `/tmp/dir` з правами `rwx------` та файл `file` в ній з правами `rw-------`.

```bash
su - creator
mkdir /tmp/dir
chmod 700 /tmp/dir
touch /tmp/dir/file
chmod 600 /tmp/dir/file
```

> **Зайдіть в директорію /tmp/dir, перегляньте вміст в довгому форматі, перевірте правильність виконання завдання.**

Команда `ls -l` всередині `/tmp/dir` підтвердить правильність виконання, показавши файл з правами `-rw-------`. Команда `ls -ld /tmp/dir` покаже директорію з правами `drwx------`.

---

## Пункт 2. Право на читання для директорій

> **Приберіть права на читання з директорії `/tmp/dir`.**
```bash
chmod u-r /tmp/dir
```

> **Перегляньте права доступу директорії `/tmp/dir` (використайте параметр -d для ls). Вийшло?**

**Так, вийшло.** Команда `ls -ld /tmp/dir` читає інформацію з батьківської директорії (`/tmp`), тому виконається успішно і покаже права `d-wx------`.

> **Перегляньте права доступу файлу `file`. Вдалося?**

**Ні, не вдалося.** Команда `ls -l /tmp/dir/file` поверне помилку "Permission denied", оскільки без права на читання (`r`) директорії неможливо знайти в ній файл.

> **Перейдіть в директорію `/tmp/dir`. Вийшло?**

**Так, вийшло.** Команда `cd /tmp/dir` спрацює, бо для входу потрібне право на виконання (`x`), яке залишилось.

> **Перегляньте вміст директорії `/tmp/dir`. Вдалося?**

**Ні, не вдалося.** Команда `ls` поверне помилку, оскільки вона потребує права на читання (`r`) директорії.

> **Створіть файл `/tmp/dir/file2`. Вийшло?**

**Так, вийшло.** Створення файлу вимагає прав на запис (`w`) та виконання (`x`), які є.

> **Зробіть висновки про вплив права на читання для директорії.**

Право на **читання (`r`)** для директорії дозволяє переглядати список файлів у ній. Без нього неможливо дізнатися вміст директорії.

---

## Пункт 3. Право на виконання для директорії

> **Приберіть право на виконання з директорії `/tmp/dir`.**
```bash
# Повертаємо початкові права: chmod 700 /tmp/dir
chmod u-x /tmp/dir
```

> **Перегляньте права доступу файлу `file`. Вдалося?**

**Ні, не вдалося.** Без права на виконання (`x`) неможливо "увійти" в директорію, щоб отримати доступ до будь-якого її вмісту.

> **Перейдіть в директорію `/tmp/dir`. Вийшло?**

**Ні, не вдалося.** `cd /tmp/dir` завершиться помилкою "Permission denied".

> **Зробіть висновок про вплив права на виконання для директорії.**

Право на **виконання (`x`)** для директорії дозволяє "увійти" в неї (`cd`) та отримати доступ до файлів та піддиректорій всередині. Без нього директорія та її вміст стають недоступними.

---

## Пункт 4. Право на запис для директорії

> **Приберіть права на запис з директорії `/tmp/dir`.**
```bash
# Повертаємо початкові права: chmod 700 /tmp/dir
chmod u-w /tmp/dir
```

> **Створіть файл `/tmp/dir/file4`. Вийшло?**

**Ні, не вдалося.** Створення файлів вимагає права на запис (`w`) в директорії.

> **Видаліть файл `/tmp/dir/file`. Вдалося?**

**Ні, не вдалося.** Видалення файлів також вимагає права на запис (`w`) в директорії.

> **Зробіть висновок про вплив права на запис для директорії.**

Право на **запис (`w`)** для директорії дозволяє створювати, видаляти та перейменовувати файли в ній.

---

## Пункт 5. Права групи

> **[destroyer] Перегляньте права доступу директорії /tmp/dir, файлу file, перейдіть в директорію і т.д.**

На початковому етапі `destroyer` не може нічого зробити, оскільки всі права встановлені тільки для власника (`creator`).

> **[creator] Додайте право на читання та виконання директорії `/tmp/dir` для групи.**

Після `chmod g+rx /tmp/dir` користувач `destroyer` зможе входити в директорію та переглядати її вміст.

> **[creator] Додайте право на запис директорії `/tmp/dir/` для групи.**

Після `chmod g+w /tmp/dir` користувач `destroyer` зможе створювати та видаляти файли в цій директорії. Право на видалення файлу визначається правами на директорію, а не на сам файл.

---

## Пункт 6. Атрибути файлів

### Частина 1: `append only`

> **Створіть файл `/append_only` та додайте йому атрибут `a` (append only).**
```bash
sudo su
touch /append_only
chattr +a /append_only
```

> **Перенаправте результат команди `echo "text"` в файл `/append_only` з перезаписом (`>`). Вийшло?**

**Ні.** Атрибут `a` забороняє перезапис файлу.

> **Перенаправте результат команди `echo "text"` в файл `/append_only` дописуючи в кінець (`>>`). Вдалося?**

**Так.** Це єдина дозволена операція запису для файлу з атрибутом `a`.

> **Видалити файл `/append_only`. Вийшло?**

**Ні.** Файл з атрибутом `a` не можна видалити, навіть суперкористувачем. Його потрібно спочатку зняти (`chattr -a /append_only`).

### Частина 2: `immutable`

> **Створіть файл `/immutable` та додайте йому атрибут `i` (immutable).**
```bash
sudo su
touch /immutable
chattr +i /immutable
```

> **Перенаправте `echo "text"` в файл `/immutable` з перезаписом (`>`) або дозаписом (`>>`). Вдалося?**

**Ні.** Атрибут `i` робить файл повністю незмінним.

> **Видаліть файл `/immutable`. Вийшло?**

**Ні.** Файл не можна видалити, перейменувати чи змінити. Потрібно спочатку зняти атрибут (`chattr -i /immutable`).
# Відповіді до лабораторної роботи по мережах

Нижче наведено відповіді та пояснення до пунктів вашого завдання.

### 1. Створення моделі мережі
**Завдання:** Створити в Packet Tracer модель мережі, яка складається з декількох ПК, об'єднаних одним-двома комутаторами (switch).

Цей пункт є інструкцією для виконання роботи в Packet Tracer. Ви створюєте просту локальну мережу (LAN), з'єднуючи кілька комп'ютерів через комутатор. Це основа для дослідження роботи мережевих протоколів.

### 2. Необхідність IP-адреси в локальній мережі
**Завдання:** Перевірити режим симуляції, запустити тестові пакети від одного хоста до хоста без/з назначеною IP-адресою. Чи є необхідність в IP-адресі при надсиланні пакетів між ПК в рамках одного сегменту мережі?

**Запитання:** Чи є необхідність в IP-адресі при надсиланні пакетів між ПК в рамках одного сегменту мережі?

**Відповідь:** Так і ні, залежно від рівня, на якому ми розглядаємо комунікацію.

*   **На Канальному рівні (L2): Ні.** Комутатор (switch) працює на Канальному рівні (Layer 2) моделі OSI. Він пересилає дані у вигляді **кадрів** (frames) і для цього використовує **MAC-адреси** (Media Access Control addresses), а не IP-адреси. Кожен мережевий пристрій має унікальну MAC-адресу. Коли один ПК надсилає дані іншому в тій самій мережі, комутатор дивиться на MAC-адресу призначення в кадрі і надсилає його на відповідний порт. Таким чином, для фізичної доставки даних в межах одного сегменту мережі IP-адреса не потрібна.

*   **На Мережевому рівні (L3): Так.** Більшість програм та утиліт, якими ми користуємося для мережевої взаємодії (наприклад, `ping`, веб-браузер), працюють на вищих рівнях, зокрема на Мережевому (Layer 3). Ці програми ідентифікують хости за допомогою **IP-адрес**. Коли ви виконуєте команду `ping 192.168.1.10`, ви вказуєте IP-адресу. Ваш комп'ютер, щоб відправити цей пакет, повинен "перекласти" цю IP-адресу на MAC-адресу за допомогою протоколу ARP (про це в наступному пункті).

**Висновок:** Хоча комутатор для пересилки кадрів використовує лише MAC-адреси, для ініціації зв'язку за допомогою сучасних програм та протоколів (TCP/IP) **IP-адреса є необхідною**, оскільки вона використовується для ідентифікації хоста на логічному рівні. Без IP-адреси ваш ПК просто не знатиме, кому призначений пакет на мережевому рівні.

### 3. Робота протоколу ARP
**Завдання:** Дослідити роботу канального рівня, на прикладі протоколу ARP. Прослідкувати в який момент і для чого надсилаються пакети ARP.

**Запитання:** Прослідкувати в який момент і для чого надсилаються пакети ARP.

**Відповідь:** Протокол ARP (Address Resolution Protocol) використовується для зв'язку між Мережевим (L3) та Канальним (L2) рівнями.

*   **Для чого:** Його головне завдання — **знайти MAC-адресу пристрою в локальній мережі, знаючи його IP-адресу.** Це необхідно, тому що для відправки кадру (frame) через Ethernet потрібна MAC-адреса отримувача, а програми зазвичай оперують IP-адресами.

*   **В який момент:** ARP-запит надсилається в такий момент:
    1.  Комп'ютер А (наприклад, IP `192.168.1.5`) хоче відправити IP-пакет комп'ютеру Б (IP `192.168.1.10`).
    2.  Комп'ютер А перевіряє свою **ARP-таблицю** (кеш), щоб побачити, чи відома йому MAC-адреса для IP `192.168.1.10`.
    3.  **Якщо запису немає**, комп'ютер А зупиняє відправку IP-пакета і **формує ARP-запит**.
    4.  Цей ARP-запит є **широкомовним** (broadcast). Він надсилається на спеціальну MAC-адресу `FF:FF:FF:FF:FF:FF`, що означає "для всіх пристроїв у мережі". Зміст запиту: "Хто має IP-адресу `192.168.1.10`? Повідомте свою MAC-адресу комп'ютеру з IP `192.168.1.5`".
    5.  Комутатор отримує цей широкомовний кадр і пересилає його на всі свої порти.
    6.  Усі пристрої в мережі отримують запит, але ігнорують його, окрім комп'ютера Б.
    7.  Комп'ютер Б (з IP `192.168.1.10`) розпізнає свою IP-адресу в запиті і надсилає **ARP-відповідь** (ARP Reply) вже **напряму** (unicast) на MAC-адресу комп'ютера А. Відповідь містить його MAC-адресу.
    8.  Комп'ютер А отримує відповідь, додає пару (IP: `192.168.1.10`, MAC: `<MAC-адреса-Б>`) до своєї ARP-таблиці і відновлює відправку IP-пакета, тепер уже вклавши його в кадр з правильною MAC-адресою призначення.

У режимі симуляції в Packet Tracer ви можете чітко побачити цей процес: перший пакет `ping` генерує ARP-запит та відповідь, і лише після цього починають надсилатися ICMP-пакети (ping).

### 4. Перегляд таблиці ARP
**Завдання:** Переглянути таблиці ARP на ПК.

**Запитання:** Переглянути таблиці ARP на ПК.

**Відповідь:** Щоб переглянути ARP-таблицю (кеш) на комп'ютері в Packet Tracer, а також на реальних ОС Windows, Linux або macOS, виконайте наступні кроки:
1.  Натисніть на ПК в Packet Tracer.
2.  Перейдіть на вкладку **Desktop**.
3.  Відкрийте **Command Prompt** (Командний рядок).
4.  Введіть команду:
    ```
    arp -a
    ```
Ця команда покаже список IP-адрес та відповідних їм фізичних (MAC) адрес, які комп'ютер "вивчив" нещодавно. Записи в цій таблиці зазвичай зберігаються протягом короткого часу (кілька хвилин), а потім видаляються, якщо не використовуються.

### Додатково: Основні поля протоколів ICMP та ARP
**Завдання:** Розглянути призначення основних полів протоколів ICMP та ARP.

#### Протокол ARP (Address Resolution Protocol)

Основні поля в заголовку ARP-пакета:

*   **Hardware Type (Тип апаратного забезпечення):** Вказує на тип мережевого протоколу канального рівня. Для Ethernet це значення `1`.
*   **Protocol Type (Тип протоколу):** Вказує на протокол мережевого рівня. Для IPv4 це `0x0800`.
*   **Hardware Address Length (Довжина апаратної адреси):** Довжина MAC-адреси в байтах. Для Ethernet це `6`.
*   **Protocol Address Length (Довжина адреси протоколу):** Довжина IP-адреси в байтах. Для IPv4 це `4`.
*   **Opcode (Код операції):** Визначає тип пакета: `1` для ARP-запиту (request), `2` для ARP-відповіді (reply).
*   **Sender Hardware Address (SHA):** MAC-адреса відправника.
*   **Sender Protocol Address (SPA):** IP-адреса відправника.
*   **Target Hardware Address (THA):** MAC-адреса отримувача. У ARP-запиті це поле зазвичай нульове, оскільки саме його і намагаються дізнатися.
*   **Target Protocol Address (TPA):** IP-адреса отримувача, чию MAC-адресу потрібно знайти.

#### Протокол ICMP (Internet Control Message Protocol)

ICMP використовується для надсилання службових та діагностичних повідомлень, а не для передачі даних користувача. Найвідоміший приклад — утиліта `ping`.

Основні поля:

*   **Type (Тип):** Головне поле, що визначає призначення повідомлення. Найпоширеніші типи:
    *   `8`: Echo Request (запит "відлуння", надсилається командою `ping`).
    *   `0`: Echo Reply (відповідь на "відлуння", повертається при успішному `ping`).
    *   `3`: Destination Unreachable (пункт призначення недосяжний).
    *   `11`: Time Exceeded (час життя пакета вичерпано).
*   **Code (Код):** Уточнює тип повідомлення. Наприклад, для `Type 3` (Destination Unreachable), `Code 1` означає "Host Unreachable" (хост недосяжний).
*   **Checksum (Контрольна сума):** Використовується для перевірки цілісності заголовка ICMP.
*   **Message Body (Тіло повідомлення):** Вміст залежить від типу. Для Echo Request/Reply тут зазвичай міститься ідентифікатор та порядковий номер, щоб співставляти запити та відповіді. Для повідомлень про помилки тут часто міститься заголовок IP-пакета, який спричинив помилку.

### 1. Створити в системі двох нових користувачів: creator та destroyer, при цьому:

* домашній каталог користувача creator: /creator

* домашній каталог користувача destroyer: /home/des

* ці користувачі повинні входити в одну нову базову групу universe

* необхідно задати кожному користувачу пароль.

Для перевірки результату, виконайте команду: (хеш виду b9***a)

echo $(groups creator destroyer) $(grep -E "creator|destroyer" /etc/passwd | awk -F ':' '{print $6}' | sort) | md5sum | cut -c -6

---

**Дії:**

Оскільки користувач padavan не має прав root, але ви можете залогінитись під root, вам потрібно додати padavan до групи, яка має право використовувати sudo (зазвичай це група sudo або wheel, залежно від дистрибутива Linux).

Залогіньтеся як root (або використайте команду su - з облікового запису, що має такі права).

Виконайте команду usermod:

```bash
usermod -aG sudo padavan
```

**Пояснення:**

*   `usermod`: Команда для модифікації облікового запису користувача.
*   `-a` (append): Додати користувача до додаткової групи(груп), а не замінити існуючий список груп. Цей прапорець є критичним!
*   `-G sudo` (Group): Вказує, до якої додаткової групи (sudo) додати користувача.
*   `padavan`: Ім'я користувача, якого ми модифікуємо.

Після цього, щоб зміни вступили в силу, користувачу padavan потрібно перезайти в систему (вийти і знову залогінитися).

####  Створення нової базової групи universe

Обидва нові користувачі (creator та destroyer) повинні мати universe як свою базову (основну) групу.

**Дії (як root або sudo):**

Створіть групу universe:

```bash
groupadd universe
```

**Пояснення:**

*   `groupadd`: Команда для створення нової групи.
*   `universe`: Ім'я нової групи.

#### Створення користувача creator

**Вимоги:**

*   Ім'я: creator
*   Базова група: universe
*   Домашній каталог: /creator

**Дії (як root або sudo):**

Створіть користувача creator:

```bash
useradd -m -d /creator -g universe creator
```

**Пояснення:**

*   `useradd`: Команда для створення нового користувача.
*   `-m` (create home directory): Створює домашній каталог, якщо він не існує.
*   `-d /creator` (home directory): Встановлює шлях /creator як домашній каталог користувача.
*   `-g universe` (primary Group): Встановлює групу universe як основну (базову) групу для нового користувача.

####  Створення користувача destroyer

**Вимоги:**

*   Ім'я: destroyer
*   Базова група: universe
*   Домашній каталог: /home/des

**Дії (як root або sudo):**

Створіть користувача destroyer:

```bash
useradd -m -d /home/des -g universe destroyer
```

**Пояснення:**

*   `useradd`: Команда для створення нового користувача.
*   `-m` (create home directory): Створює домашній каталог /home/des, якщо він не існує.
*   `-d /home/des` (home directory): Встановлює шлях /home/des як домашній каталог користувача.
*   `-g universe` (primary Group): Встановлює групу universe як основну (базову) групу для нового користувача.

####  Задання паролів для нових користувачів

Необхідно задати паролі, щоб користувачі могли залогінитись.

**Дії (як root або sudo):**

Задайте пароль для creator:

```bash
passwd creator
# Система попросить ввести новий пароль двічі
```

Задайте пароль для destroyer:

```bash
passwd destroyer
# Система попросить ввести новий пароль двічі
```

**Пояснення:**

`passwd`: Команда для зміни пароля користувача. Використовуючи її як root, ви можете задавати паролі іншим користувачам без знання їхнього поточного пароля.

### Зведена таблиця команд (Виконувати як root або з sudo):

| Крок | Команда | Призначення |
| :--- | :--- | :--- |
| 1. padavan та sudo | `usermod -aG sudo padavan` | Надати padavan права sudo. |
| 2. Група | `groupadd universe` | Створити основну групу universe. |
| 3. Користувач creator | `useradd -m -d /creator -g universe creator` | Створити creator з каталогом /creator та основною групою universe. |
| 4. Користувач destroyer | `useradd -m -d /home/des -g universe destroyer` | Створити destroyer з каталогом /home/des та основною групою universe. |
| 5. Паролі | `passwd creator` | Встановити пароль для creator. |
| | `passwd destroyer` | Встановити пароль для destroyer. |

---

### 2. Дати можливість користувачу creator виконувати підключення та відключення розділів (mount / umount) без вводу пароля.

Для перевірки, зайдіть під користувачем 'creator' в домашній каталог і виконайте наступну послідовність команд: (хеш виду 00*****22)

echo $( id -un; pwd; sudo mount -v --bind /tmp /media 2>&1; sudo umount /media 2>&1; ) | md5sum | cut -c 2-10

---

**Рішення (редагування `/etc/sudoers`):**

Щоб надати користувачу `creator` право виконувати команди `mount` та `umount` без пароля, потрібно додати правило безпосередньо до файлу `/etc/sudoers`.

**УВАГА:** Редагувати цей файл потрібно **тільки** за допомогою команди `sudo visudo`. Пряме редагування може призвести до синтаксичних помилок, які повністю заблокують роботу `sudo`. `visudo` перевіряє синтаксис перед збереженням і запобігає таким проблемам.

**Інструкція:**

1.  **Визначте повні шляхи до команд**
    ```bash
    which mount
    which umount
    ```
    Припустимо, ви отримали `/bin/mount` та `/bin/umount`.

2.  **Відкрийте `/etc/sudoers` за допомогою `visudo`**
    ```bash
    sudo visudo
    ```

3.  **Додайте правило у файл**
    Прокрутіть файл до кінця і додайте такий рядок:
    ```
    creator ALL=(ALL) NOPASSWD: /bin/mount, /bin/umount
    ```

4.  **Збережіть та закрийте файл**

    Дії залежать від того, який текстовий редактор використовується за замовчуванням для `visudo`.

    *   **Якщо редактор `nano`:**
        *   Натисніть `Ctrl+X` для виходу.
        *   Натисніть `Y` (Yes) для підтвердження збереження.
        *   Натисніть `Enter` для підтвердження імені файлу.

    *   **Якщо редактор `vi` або `vim`:**
        *   Натисніть клавішу `Esc`, щоб переконатися, що ви перебуваєте в командному режимі (Command mode).
        *   Введіть `:wq` і натисніть `Enter`.
        *   `:w` означає "write" (записати), а `:q` означає "quit" (вийти).

**Пояснення правила:**
*   `creator`: Ім'я користувача.
*   `ALL=`: Правило діє для будь-якого хоста.
*   `(ALL)`: Користувач може виконувати команду від імені будь-якого іншого користувача.
*   `NOPASSWD:`: Вказує, що для наступних команд пароль вводити не потрібно.
*   `/bin/mount, /bin/umount`: Перелік команд, до яких застосовується правило.

---

### 3. Дозволити всім користувачам групи universe додавати ІР-адрес на інтерфейс без вводу паролю (команда ір).

Для перевірки результату, зайдіть в систему під будь-яким із користувачів цієї групи та виконайте наступну послідовність команд:  (хеш виду 07******51)

echo $( IP=10.1.0.$(($RANDOM%200)); DEV=enp0s3; sudo ip a add $IP/24 dev $DEV 2>&1; ip a | grep $IP | head -n 1 | cut -c -16; sudo ip a del $IP/24 dev $DEV 2>&1;) | md5sum | cut -c -10

---

**Рішення (Повний доступ до команди `ip`):**

За вашим бажанням, ось варіант, що надає членам групи `universe` повний доступ до всіх функцій команди `ip` без пароля. Цей метод менш безпечний, оскільки дозволяє виконувати будь-які дії, включаючи руйнівні (наприклад, вимкнення мережевих інтерфейсів).

**Інструкція:**

1.  **Визначте повний шлях до команди `ip`**
    ```bash
    which ip
    ```
    Припустимо, це `/sbin/ip`.

2.  **Відкрийте `/etc/sudoers` за допомогою `visudo`**
    ```bash
    sudo visudo
    ```

3.  **Додайте правило для групи `universe`**
    Прокрутіть файл до кінця і додайте новий, більш загальний рядок:
    ```
    %universe ALL=(ALL) NOPASSWD: /sbin/ip
    ```

4.  **Збережіть та закрийте файл** (`:wq` в `vi` або `Ctrl+X` в `nano`).

**Пояснення правила:**
*   `%universe`: Правило для групи `universe`.
*   `ALL=(ALL) NOPASSWD:`: Без пароля.
*   `/sbin/ip`: Дозволяє виконання команди `ip` з **будь-якими** підкомандами та аргументами.

---

### Додатковий крок: Додавання `padavan` до групи `universe`

Щоб користувач `padavan` (який має права `sudo`) міг успішно виконати команду перевірки для завдання 3, його також необхідно додати до групи `universe`.

**Команда:**
```bash
sudo usermod -aG universe padavan
```

**Пояснення:**
*   `sudo`: Виконання команди з правами адміністратора.
*   `usermod`: Команда для модифікації існуючого користувача.
*   `-aG`: Додає (`-a`) користувача до вказаної додаткової групи (`-G`). Прапор `-a` (append) дуже важливий, оскільки без нього користувача буде видалено з усіх інших груп (включаючи групу `sudo`).
*   `universe`: Назва групи, до якої додаємо користувача.
*   `padavan`: Ім'я користувача.

Після виконання цієї команди `padavan` стане членом групи `universe` і зможе користуватися `sudo` правилами, визначеними для цієї групи. Для того, щоб зміни гарантовано вступили в силу, користувачу може знадобитися перелогінитися.

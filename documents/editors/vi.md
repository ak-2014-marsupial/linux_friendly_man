# Посібник з текстового редактора `vi` / `vim`

`vi` (Visual Editor) — це класичний, потужний та надзвичайно ефективний текстовий редактор, який є стандартом для всіх Unix-подібних систем. Коли ви сьогодні запускаєте `vi`, найчастіше насправді запускається його покращена версія — `vim` (Vi IMproved).

Головна особливість `vi`, яка відрізняє його від інших редакторів (таких як Nano або VS Code) — це **модальність**. `vi` має кілька режимів роботи, між якими потрібно переключатися.

### **Ключова концепція: Режими `vi`**

Розуміння режимів — це 90% успіху у вивченні `vi`.

1.  **Нормальний режим (Normal Mode)**
    *   Це режим за замовчуванням, у який ви потрапляєте при відкритті файлу.
    *   **Призначення**: навігація по файлу, видалення, копіювання, вставка тексту та виконання команд.
    *   У цьому режимі натискання клавіш не вставляє текст, а виконує команди (наприклад, `j` — рух вниз, `dd` — видалити рядок).

2.  **Режим вставки (Insert Mode)**
    *   **Призначення**: безпосереднє введення тексту, як у звичайному текстовому редакторі.
    *   Для переходу в цей режим з нормального використовуються команди `i`, `a`, `o` та інші.
    *   Для повернення в нормальний режим натисніть клавішу **`Esc`**.

3.  **Командний режим (Command-Line Mode)**
    *   **Призначення**: виконання складних команд, таких як збереження файлу, вихід з редактора, пошук, заміна, налаштування редактора.
    *   Для переходу в цей режим з нормального натисніть двокрапку **`:`**. Внизу екрана з'явиться командний рядок.

**Базовий цикл роботи**: Відкрити файл (ви в нормальному режимі) -> Переміститися до потрібного місця -> Перейти в режим вставки (`i`) -> Ввести текст -> Повернутися в нормальний режим (`Esc`) -> Зберегти і вийти (`:wq`).

---

### **Основні команди**

#### **Переключення між режимами**

| Команда | Дія (виконується в нормальному режимі) |
| :--- | :--- |
| **`i`** | Перейти в режим вставки **перед** поточним символом. |
| **`a`** | Перейти в режим вставки **після** поточного символа. |
| **`o`** | Створити новий рядок **нижче** поточного і перейти в режим вставки. |
| **`O`** | Створити новий рядок **вище** поточного і перейти в режим вставки. |
| **`Esc`** | **(Найважливіша клавіша)** Повернутися в нормальний режим з будь-якого іншого. |
| **`:`** | Перейти в командний режим. |
| **`v`** | Перейти в візуальний режим (для виділення тексту). |

#### **Навігація (в нормальному режимі)**

*   **`h`, `j`, `k`, `l`** — рух вліво, вниз, вгору, вправо (класичний спосіб).
*   **`w`** — перейти на початок наступного слова.
*   **`b`** — перейти на початок попереднього слова.
*   **`0`** (нуль) — перейти на початок поточного рядка.
*   **`$`** — перейти в кінець поточного рядка.
*   **`gg`** — перейти на перший рядок файлу.
*   **`G`** — перейти на останній рядок файлу.
*   **`<номер>G`** (наприклад, `15G`) — перейти на рядок з вказаним номером.

#### **Редагування (в нормальному режимі)**

*   **`x`** — видалити символ під курсором.
*   **`dd`** — видалити (вирізати) весь поточний рядок.
*   **`dw`** — видалити слово, починаючи з курсора.
*   **`yy`** — скопіювати ("yank") весь поточний рядок.
*   **`p`** — вставити ("put") скопійований або вирізаний текст після курсора.
*   **`u`** — скасувати останню дію.
*   **`Ctrl + r`** — повторити скасовану дію (redo).

#### **Командний режим (команди після `:`)**

| Команда | Дія |
| :--- | :--- |
| **`:w`** | **(Write)**. Зберегти файл, але не виходити. |
| **`:q`** | **(Quit)**. Вийти з редактора (не спрацює, якщо є незбережені зміни). |
| **`:wq`** | Зберегти файл і вийти. |
| **`:x`** | Аналогічно до `:wq`, але зберігає файл тільки якщо були зміни. |
| **`:q!`** | **Вийти без збереження змін.** Дуже корисна команда, коли ви щось зламали. |
| **`:/<шаблон>`** | Пошук вказаного шаблону тексту (рух вперед). Натисніть `n` для наступного збігу. |
| **`:?<шаблон>`** | Пошук вказаного шаблону тексту (рух назад). |
| **`:%s/старе/нове/g`** | Замінити всі входження слова "старе" на "нове" у всьому файлі. |
| **`:set number`** | Показати номери рядків. |
| **`:set nonumber`** | Сховати номери рядків. |

---

### **Практичний приклад: редагування файлу**

1.  **Відкрити файл:**
    ```bash
    vi config.txt
    ```
2.  Ви опинились у **нормальному режимі**.
3.  Натисніть `j` кілька разів, щоб спуститися на потрібний рядок.
4.  Натисніть `$` щоб перейти в кінець рядка.
5.  Натисніть `a`, щоб перейти в **режим вставки** після курсора, і допишіть потрібний текст.
6.  Натисніть `Esc`, щоб повернутися в **нормальний режим**.
7.  Перейдіть на інший рядок за допомогою `k` (вгору).
8.  Натисніть `dd`, щоб видалити цей рядок.
9.  Натисніть `u`, щоб скасувати видалення.
10. Натисніть `:`, щоб перейти в **командний режим**.
11. Введіть `wq` і натисніть `Enter`, щоб зберегти файл і вийти.

### **Чому варто вивчити `vi`?**

*   **Всюдисущість**: `vi` є на будь-якому сервері Linux/Unix, навіть на мінімальних системах, де немає нічого іншого.
*   **Ефективність**: Робота без миші та швидкі команди дозволяють редагувати текст набагато швидше після досягнення певного рівня майстерності.
*   **Швидкість роботи**: `vi` дуже легкий і миттєво запускається та працює з файлами будь-якого розміру.

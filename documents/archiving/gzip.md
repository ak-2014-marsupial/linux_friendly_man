# Посібник з команд `gzip` та `gunzip`

`gzip` (GNU Zip) — це стандартна утиліта в Unix-подібних системах, призначена для стиснення файлів. На відміну від `tar`, яка об'єднує файли в архів, `gzip` працює лише з одним файлом (або потоком даних) за раз.

`gunzip` — це команда для розпакування файлів, стиснутих за допомогою `gzip`.

### **Ключові концепції**

*   **Робота з одним файлом**: `gzip` не створює архівів з директорій. Вона стискає один файл.
*   **Заміна файлу**: За замовчуванням, після успішного стиснення `gzip` створює новий файл з розширенням `.gz` і **видаляє оригінал**. Аналогічно, `gunzip` розпаковує файл і видаляє `.gz` архів.
*   **`gunzip` — це псевдонім**: Команда `gunzip` є еквівалентом команди `gzip -d`.

#### **Базовий синтаксис**

```bash
gzip [опції] [файл]
gunzip [опції] [файл.gz]
```

---

### **Основні опції `gzip`**

| Опція | Пояснення |
| :--- | :--- |
| **`-d`** | **(Decompress)**. Розпакувати файл. Змушує `gzip` поводитися як `gunzip`. |
| **`-k`** | **(Keep)**. **Дуже корисна опція.** Не видаляти оригінальний файл після стиснення або розпакування. |
| **`-c`** | **(Stdout)**. Виводити результат в стандартний потік виводу (на екран або для передачі іншій команді через `|`), а не у файл. Оригінальний файл не видаляється. |
| **`-l`** | **(List)**. Показати інформацію про стиснений файл (розмір до і після стиснення, коефіцієнт) без його розпакування. |
| **`-r`** | **(Recursive)**. Рекурсивно обійти директорію і стиснути кожен знайдений файл окремо. |
| **`-[1-9]`** | Встановити рівень стиснення. `-1` або `--fast` — найшвидше, але найменше стиснення. `-9` або `--best` — найповільніше, але найкраще стиснення. За замовчуванням використовується рівень `-6`. |

### **Основні опції `gunzip`**

Опції здебільшого збігаються з аналогами `gzip`.

| Опція | Пояснення |
| :--- | :--- |
| **`-k`** | **(Keep)**. Не видаляти архівний файл (`.gz`) після успішного розпакування. |
| **`-c`** | **(Stdout)**. Вивести розпакований вміст у стандартний вивід, не створюючи файл на диску. |
| **`-l`** | **(List)**. Показати інформацію про стиснений файл. |

---

### **Практичні приклади**

#### **Стиснення файлів (`gzip`)**

1.  **Стиснути один файл (оригінал буде видалено):**
    ```bash
    gzip large_file.log
    # Результат: з'явиться large_file.log.gz, а large_file.log зникне
    ```

2.  **Стиснути файл, але зберегти оригінал:**
    ```bash
    gzip -k data.csv
    # Результат: існують і data.csv, і data.csv.gz
    ```

3.  **Стиснути файл з максимальним рівнем стиснення:**
    ```bash
    gzip -9 backup.sql
    ```

4.  **Стиснути всі файли в директорії `logs` та її піддиректоріях:**
    ```bash
    gzip -r ./logs
    ```

#### **Розпакування файлів (`gunzip`)**

5.  **Розпакувати файл (архів `.gz` буде видалено):**
    ```bash
    gunzip large_file.log.gz
    # Результат: з'явиться large_file.log, а large_file.log.gz зникне
    ```

6.  **Розпакувати файл за допомогою `gzip -d`:**
    ```bash
    gzip -d data.csv.gz
    ```

7.  **Розпакувати файл, зберігши архів `.gz`:**
    ```bash
    gunzip -k backup.sql.gz
    ```

#### **Робота з потоками (дуже поширений випадок)**

`gzip` і `gunzip` часто використовуються для стиснення "на льоту".

8.  **Створити стиснений дамп бази даних MySQL:**
    ```bash
    # Вивід mysqldump передається gzip, який стискає його і записує у файл
    mysqldump -u user -p my_database | gzip > my_database.sql.gz
    ```

9.  **Розгорнути стиснений дамп бази даних:**
    ```bash
    # gunzip розпаковує файл у стандартний вивід, який передається mysql
    gunzip < my_database.sql.gz | mysql -u user -p my_database
    # Або так:
    cat my_database.sql.gz | gunzip | mysql -u user -p my_database
    ```

#### **Перегляд інформації**

10. **Подивитися, наскільки добре стиснутий файл:**
    ```bash
    gzip -l my_database.sql.gz
    # Вивід: compressed  uncompressed  ratio uncompressed_name
    #         123456      12345678    90.0% my_database.sql
    ```

### **`gzip` чи `tar`?**

Це важливо розрізняти:
*   **`gzip`**: стискає **один** файл або потік даних.
*   **`tar`**: об'єднує **багато** файлів і директорій в один архівний файл, але **без стиснення**.

**Разом вони — сила**: стандартний підхід для архівації в Unix — це спочатку об'єднати файли за допомогою `tar`, а потім стиснути отриманий `.tar` файл за допомогою `gzip`. Команда `tar` з прапором `-z` робить це за один крок:

```bash
# Створити архів .tar і одразу стиснути його за допомогою gzip
tar -czf archive.tar.gz ./my_folder
```

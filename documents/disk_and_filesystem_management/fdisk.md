# fdisk: Manipulate Disk Partition Table

`fdisk` — це потужна утиліта командного рядка для створення та маніпулювання таблицями розділів диска. Вона підтримує MBR, GPT та інші формати.

> **Увага:** `fdisk` є інструментом низького рівня. Неправильне використання може призвести до **повної втрати даних** на диску. Завжди перевіряйте, з яким диском ви працюєте, і створюйте резервні копії важливих даних.

#### **Базовий синтаксис**

```bash
# Для виводу інформації
fdisk -l [пристрій...]

# Для входу в інтерактивний режим
fdisk [пристрій]
```

*   **`-l`**: Вивести таблиці розділів для вказаних пристроїв (або для всіх, якщо пристрій не вказано).
*   **`[пристрій]`**: Блоковий пристрій, з яким потрібно працювати (наприклад, `/dev/sda`, `/dev/nvme0n1`).

---

### **Інтерактивний режим**

Запуск `fdisk /dev/sdX` переводить утиліту в інтерактивний режим, де ви можете виконувати команди для зміни таблиці розділів. Зміни не зберігаються доти, доки не буде введено команду `w`.

#### **Основні команди інтерактивного режиму**

| Команда | Пояснення |
| :--- | :--- |
| **`m`** | Показати меню з усіма доступними командами. |
| **`p`** | Вивести поточну таблицю розділів диска. |
| **`n`** | Створити новий розділ. `fdisk` запитає тип розділу, номер, перший та останній сектори. |
| **`d`** | Видалити існуючий розділ. Потрібно буде вказати його номер. |
| **`t`** | Змінити тип розділу (наприклад, `Linux filesystem`, `Linux swap`, `EFI System`). |
| **`g`** | Створити нову порожню таблицю розділів GPT. **(Всі дані на диску буде втрачено!)** |
| **`o`** | Створити нову порожню таблицю розділів MBR. **(Всі дані на диску буде втрачено!)** |
| **`w`** | **Зберегти** всі зміни на диск та вийти. |
| **`q`** | Вийти **без збереження** змін. |

---

### **Приклади використання**

1.  **Вивести список розділів на всіх дисках:**
    ```bash
    sudo fdisk -l
    ```

2.  **Показати таблицю розділів для конкретного диска:**
    ```bash
    sudo fdisk -l /dev/sda
    ```

3.  **Запустити інтерактивний режим для диска `/dev/sdb`:**
    ```bash
    sudo fdisk /dev/sdb
    ```

4.  **Покроковий приклад створення нового розділу в інтерактивному режимі:**

    Припустимо, ми працюємо з диском `/dev/sdb`.

    ```bash
    # Входимо в інтерактивний режим
    sudo fdisk /dev/sdb
    ```

    *   Введіть `p`, щоб переглянути поточні розділи і вільне місце.
    *   Введіть `n`, щоб створити новий розділ.
    *   `fdisk` запропонує вибрати тип розділу (primary/extended для MBR або просто номер для GPT). Зазвичай можна погодитися зі значенням за замовчуванням.
    *   Далі `fdisk` запитає про перший сектор. Натискання `Enter` вибере перше доступне місце.
    *   Потім `fdisk` запитає про останній сектор. Можна вказати розмір, наприклад, `+10G` для створення розділу розміром 10 гігабайт, або натиснути `Enter`, щоб використати все доступне місце.
    *   Після створення розділу введіть `p` ще раз, щоб перевірити нову таблицю розділів.
    *   Якщо все правильно, введіть `w`, щоб зберегти зміни. Якщо ви помилилися, введіть `q`, щоб вийти без збереження.

5.  **Зміна типу розділу на `Linux swap`:**

    *   В інтерактивному режимі введіть `t`.
    *   Вкажіть номер розділу, який потрібно змінити.
    *   Введіть код типу. Можна натиснути `L`, щоб побачити список усіх кодів. Для swap зазвичай використовується `19` (для GPT) або `82` (для MBR).
    *   Натисніть `w` для збереження.

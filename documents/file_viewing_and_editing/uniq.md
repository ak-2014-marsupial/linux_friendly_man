# Посібник з утиліти `uniq`

`uniq` — це утиліта командного рядка, яка використовується для фільтрації або звітування про однакові рядки. Вона є логічним продовженням команди `sort`.

### **Ключова концепція: Робота з суміжними рядками**

**Найважливіше, що потрібно знати про `uniq`**: вона виявляє лише ті однакові рядки, які йдуть **безпосередньо один за одним (є суміжними)**.

Це означає, що для того, щоб `uniq` коректно знайшла **всі** дублікати у файлі, цей файл **обов'язково має бути попередньо відсортований**. Стандартний та найпоширеніший спосіб використання — це конвеєр `sort | uniq`.

#### **Базовий синтаксис**

```bash
uniq [опції] [вхідний_файл]

# Правильне використання для всього файлу
команда | sort | uniq [опції]
```

---

### **Основні опції**

| Опція | Пояснення |
| :--- | :--- |
| **`-c`** | **(Count)**. **Найкорисніша опція.** Перед кожним рядком виводить кількість його повторень. |
| **`-d`** | **(Repeated)**. Виводити лише ті рядки, які повторюються (по одному екземпляру з кожної групи дублікатів). |
| **`-u`** | **(Unique)**. Виводити лише ті рядки, які не мають дублікатів (є унікальними). |
| **`-i`** | **(Ignore case)**. Ігнорувати регістр символів при порівнянні рядків. |
| **`-f N`** | **(Skip fields)**. Ігнорувати перші `N` полів (колонок) при порівнянні. |
| **`-s N`** | **(Skip chars)**. Ігнорувати перші `N` символів при порівнянні. |

---

### **Практичні приклади**

Припустимо, є файл `access.log` з таким вмістом:
```
/index.html
/styles.css
/index.html
/about.html
/styles.css
/index.html
```

1.  **Неправильне використання (без `sort`):**
    ```bash
    uniq access.log
    ```
    **Результат:**
    ```
    /index.html
    /styles.css
    /index.html
    /about.html
    /styles.css
    /index.html
    ```
    *`uniq` не бачить дублікатів, бо однакові рядки не йдуть один за одним.* 

2.  **Правильне використання (видалення дублікатів):**
    *   Це еквівалентно команді `sort -u access.log`.
    ```bash
    sort access.log | uniq
    ```
    **Результат:**
    ```
    /about.html
    /index.html
    /styles.css
    ```

3.  **Підрахунок кількості входжень кожного рядка:**
    *   Це один з найпопулярніших сценаріїв використання `uniq`.
    ```bash
    sort access.log | uniq -c
    ```
    **Результат:**
    ```
          1 /about.html
          3 /index.html
          2 /styles.css
    ```

4.  **Сортування за популярністю (від найбільш до найменш частого):**
    *   Ми комбінуємо `sort`, `uniq -c` та ще один `sort -r` (зворотне числове сортування).
    ```bash
    sort access.log | uniq -c | sort -nr
    ```
    **Результат:**
    ```
          3 /index.html
          2 /styles.css
          1 /about.html
    ```

5.  **Показати лише ті рядки, які повторюються:**
    ```bash
    sort access.log | uniq -d
    ```
    **Результат:**
    ```
    /index.html
    /styles.css
    ```

6.  **Показати лише ті рядки, які зустрічаються рівно один раз:**
    ```bash
    sort access.log | uniq -u
    ```
    **Результат:**
    ```
    /about.html
    ```

7.  **Ігнорування першого поля (наприклад, з міткою часу):**
    *   Припустимо, файл `logs_with_time.txt` виглядає так:
        ```
        10:01:00 GET /index.html
        10:05:10 GET /styles.css
        10:15:30 GET /index.html
        ```
    *   Щоб знайти унікальні запити, ігноруючи час, ми пропускаємо перше поле (`-f 1`):
    ```bash
    sort -k 2 logs_with_time.txt | uniq -f 1
    ```
    **Результат:**
    ```
    10:01:00 GET /index.html
    10:05:10 GET /styles.css
    ```

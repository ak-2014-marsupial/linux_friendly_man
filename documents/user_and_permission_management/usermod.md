Команда `usermod` (user modify) використовується для зміни параметрів існуючого облікового запису користувача.

#### **Базовий синтаксис**

```bash
sudo usermod [опції] ім'я_користувача
```

--- 

### **Основні опції**

Більшість опцій `usermod` збігаються з опціями `useradd`.

| Опція | Пояснення |
| :--- | :--- |
| **`-l нове_ім'я`**, **`--login нове_ім'я`** | Змінити логін (ім'я) користувача. |
| **`-d /новий/шлях`**, **`--home /новий/шлях`** | Змінити шлях до домашньої директорії. Опція `-m` перемістить вміст старої директорії в нову. |
| **`-s /шлях/до/оболонки`**, **`--shell /шлях/до/оболонки`** | Змінити оболонку для входу. |
| **`-g нова_група`**, **`--gid нова_група`** | Змінити основну групу користувача. |
| **`-G групи`**, **`--groups групи`** | Встановити новий список додаткових груп (перезаписує старий список). |
| **`-aG групи`**, **`--append --groups групи`** | **Дуже важлива опція.** Додати користувача до додаткових груп, не видаляючи його з існуючих. |
| **`-L`**, **`--lock`** | Заблокувати обліковий запис користувача. |
| **`-U`**, **`--unlock`** | Розблокувати обліковий запис користувача. |
| **`-e ДАТА`**, **`--expiredate ДАТА`** | Встановити дату закінчення терміну дії облікового запису (у форматі `YYYY-MM-DD`). |

--- 

### **Приклади використання**

Припустимо, існує користувач `testuser`.

1.  **Додати користувача до групи `sudo`:**
    Використовуйте опцію `-aG` (`a` — append, `G` — groups), щоб не видалити користувача з інших груп.
    ```bash
    sudo usermod -aG sudo testuser
    ```

2.  **Змінити оболонку користувача на `/bin/zsh`:**
    ```bash
    sudo usermod -s /bin/zsh testuser
    ```

3.  **Заблокувати користувача:**
    Користувач не зможе увійти в систему, доки його не розблокують.
    ```bash
    sudo usermod -L testuser
    ```

4.  **Розблокувати користувача:**
    ```bash
    sudo usermod -U testuser
    ```

5.  **Змінити ім'я користувача (логін):**
    Змінимо логін `testuser` на `newname`.
    ```bash
    sudo usermod -l newname testuser
    ```
    *При цьому домашня директорія `/home/testuser` не буде перейменована автоматично. Це потрібно робити вручну.*

6.  **Змінити домашню директорію та перемістити її вміст:**
    ```bash
    sudo usermod -d /home/new_home -m testuser
    ```
    *Опція `-m` перемістить вміст з `/home/testuser` до `/home/new_home`.*

7.  **Видалити користувача з групи:**
    Прямої опції для цього немає. Потрібно отримати список груп, в яких перебуває користувач, і перезаписати його за допомогою `-G`, виключивши непотрібну групу.
    ```bash
    # Дізнаємося групи користувача
    groups testuser
    # testuser : testuser sudo docker

    # Припустимо, хочемо видалити його з `docker`. Перезаписуємо список груп:
    sudo usermod -G sudo testuser
    ```
    ***Увага:** Це видалить користувача з усіх додаткових груп, крім `sudo`. Будьте обережні.*

# Посібник з команди `dnf`

`dnf` (Dandified YUM) — це сучасний менеджер пакунків для RPM-сумісних дистрибутивів Linux, таких як Fedora, CentOS, RHEL та інші. `dnf` є наступником `yum` (Yellowdog Updater, Modified) і пропонує кращу продуктивність, менше споживання пам'яті та покращене вирішення залежностей.

У сучасних версіях RHEL/CentOS/Fedora `yum` є символічним посиланням на `dnf`, тому команди взаємозамінні, але рекомендується використовувати саме `dnf`.

Як і `yum`, `dnf` є високорівневим інструментом, який автоматизує процес роботи з пакунками: він самостійно знаходить програми у віддалених сховищах (репозиторіях), вирішує всі залежності, завантажує та встановлює їх за допомогою `rpm`.

### **Ключова концепція**

`dnf` — це ваш основний інструмент для керування програмним забезпеченням. Він робить складну роботу за вас. Замість того, щоб вручну шукати `.rpm` файли та їхні залежності, ви просто даєте команду `dnf`, і він робить усе сам.

**Більшість команд `dnf` вимагають прав суперкористувача, тому їх потрібно виконувати з `sudo`.**

#### **Базовий синтаксис**

```bash
sudo dnf [команда] [назва_пакунка]
```

---

### **Основні команди `dnf`**

#### **1. Встановлення, оновлення та видалення**

*   **Встановити пакунок:**
    *   `dnf` автоматично знайде пакунок та всі його залежності.
    ```bash
    sudo dnf install nginx
    ```

*   **Оновити всі пакунки в системі:**
    *   Це стандартна команда для підтримки системи в актуальному стані.
    ```bash
    sudo dnf upgrade
    # або `sudo dnf update` (вони майже ідентичні)
    ```

*   **Оновити лише конкретний пакунок:**
    ```bash
    sudo dnf update kernel
    ```

*   **Видалити пакунок:**
    *   `dnf` також видалить залежності, які більше не потрібні іншим програмам.
    ```bash
    sudo dnf remove htop
    ```

*   **Перевстановити пакунок:**
    *   Корисно, якщо ви випадково видалили або змінили конфігураційні файли.
    ```bash
    sudo dnf reinstall coreutils
    ```

*   **Видалити "осиротілі" залежності:**
    *   Видаляє пакунки, які були встановлені як залежності, але більше не потрібні.
    ```bash
    sudo dnf autoremove
    ```

#### **2. Пошук та отримання інформації**

*   **Пошук пакунка за ключовим словом:**
    *   Шукає у назвах та описах пакунків.
    ```bash
    dnf search firewall
    ```

*   **Отримати детальну інформацію про пакунок:**
    *   Показує архітектуру, версію, розмір, опис тощо.
    ```bash
    dnf info python3
    ```

*   **Показати список пакунків:**
    ```bash
    dnf list installed # Список встановлених
    dnf list available # Список доступних для встановлення
    dnf list --updates # Список пакунків, для яких є оновлення
    ```

*   **Дізнатися, який пакунок надає певний файл або команду:**
    *   Дуже корисна функція, коли ви знаєте команду, але не знаєте, який пакунок її містить.
    ```bash
    dnf provides /usr/bin/htop
    # або `dnf whatprovides /usr/bin/htop`
    ```

*   **Подивитися залежності пакунка:**
    *   Показує, які бібліотеки та інші пакунки потрібні для роботи вказаного пакунка.
    ```bash
    dnf deplist nginx
    ```

*   **Перевірити наявність оновлень (без встановлення):**
    *   Корисно, щоб просто подивитися, які пакунки можна оновити.
    ```bash
    dnf check-update
    ```

#### **3. Робота з групами пакунків**

*   **Показати список доступних груп пакунків:**
    ```bash
    dnf group list
    ```

*   **Встановити цілу групу пакунків:**
    *   Зручно для налаштування середовища розробки.
    ```bash
    sudo dnf group install "Development Tools"
    ```

*   **Видалити групу пакунків:**
    ```bash
    sudo dnf group remove "Development Tools"
    ```

#### **4. Історія транзакцій**

`dnf` веде лог усіх дій, що дозволяє їх переглядати і навіть скасовувати.

*   **Показати історію всіх транзакцій:**
    ```bash
    dnf history
    ```

*   **Подивитися деталі конкретної транзакції:**
    ```bash
    dnf history info 15
    ```

*   **Скасувати транзакцію:**
    *   **Дуже потужна функція.** `dnf` спробує повернути систему до стану, в якому вона була до транзакції.
    ```bash
    sudo dnf history undo 15
    # Скасувати останню транзакцію
    sudo dnf history undo last
    ```

#### 5. Робота з репозиторіями

Для керування джерелами програмного забезпечення (репозиторіями) `dnf` використовує утиліту `config-manager`.

*   **Показати список увімкнених репозиторіїв:**
    ```bash
    dnf repolist
    ```

*   **Показати список усіх репозиторіїв (включно з вимкненими):**
    ```bash
    dnf repolist --all
    ```

*   **Увімкнути репозиторій:**
    *   Активує репозиторій за його ID, щоб `dnf` почав його використовувати.
    ```bash
    sudo dnf config-manager --set-enabled REPO_ID
    ```

*   **Вимкнути репозиторій:**
    ```bash
    sudo dnf config-manager --set-disabled REPO_ID
    ```

*   **Додати новий репозиторій:**
    *   Додає репозиторій за посиланням на `.repo` файл.
    ```bash
    sudo dnf config-manager --add-repo http://example.com/some/repository.repo
    ```

*   **Встановлення `.rpm` файлу**
    *   На відміну від `rpm`, `dnf` спробує знайти та встановити залежності для локального файлу з репозиторіїв.
    ```bash
    sudo dnf install /path/to/package.rpm
    ```

#### **6. Обслуговування системи**

*   **Очистити кеш:**
    *   Видаляє завантажені пакунки та метадані. Може допомогти вирішити проблеми із застарілим кешем.
    ```bash
    sudo dnf clean all
    ```

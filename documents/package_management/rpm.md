# Посібник з команди `rpm`

`rpm` (RPM Package Manager) — це потужна система керування пакунками, яка є основою для дистрибутивів Linux, що походять від Red Hat (RHEL, CentOS, Fedora, Oracle Linux та інші). `rpm` — це низькорівневий інструмент, що дозволяє встановлювати, оновлювати, видаляти, запитувати та перевіряти програмні пакунки у форматі `.rpm`.

### **Ключова концепція: `rpm` проти `yum`/`dnf`**

Дуже важливо розуміти різницю між `rpm` та високорівневими менеджерами, як `yum` або `dnf`.

*   **`rpm`**: Працює з окремими файлами пакунків (`.rpm`), які вже є на вашому диску. `rpm` **не вміє автоматично вирішувати залежності**. Якщо пакунок `A` вимагає пакунок `B`, ви повинні вручну знайти та встановити пакунок `B` перед встановленням `A`.
*   **`yum`/`dnf`**: Працюють з репозиторіями (віддаленими сховищами пакунків). Вони автоматично знаходять потрібний пакунок, **вирішують усі його залежності**, завантажують усе необхідне, а потім використовують `rpm` "під капотом" для фактичного встановлення.

**Висновок**: для звичайного встановлення та оновлення програм завжди використовуйте `yum` або `dnf`. `rpm` використовується для специфічних завдань: запитів до бази даних пакунків, перевірки файлів або встановлення `.rpm` файлу, який ви завантажили вручну.

### **Режими роботи та базовий синтаксис**

```bash
rpm --[режим] [опції] [назва_пакунка_або_файл]
```

#### **Основні режими**

| Режим | Прапор | Пояснення |
| :--- | :--- | :--- |
| Запит | `-q` | **(Query)**. Отримати інформацію про пакунки. |
| Встановлення | `-i` | **(Install)**. Встановити новий пакунок з `.rpm` файлу. |
| Оновлення | `-U` | **(Upgrade)**. Оновити існуючий пакунок або встановити, якщо його немає. **Рекомендований спосіб.** |
| Видалення | `-e` | **(Erase)**. Видалити (деінсталювати) пакунок. |
| Перевірка | `-V` | **(Verify)**. Перевірити цілісність встановленого пакунка. |

---

### **Найпоширеніші опції та приклади**

#### **1. Запити до бази даних пакунків (`-q`)**

*   **Перевірити, чи встановлено пакунок, та його версію:**
    ```bash
    rpm -q httpd
    ```

*   **Показати список ВСІХ встановлених пакунків (часто з `grep`):**
    ```bash
    rpm -qa | grep kernel
    ```

*   **Отримати детальну інформацію про встановлений пакунок:**
    ```bash
    rpm -qi wget
    ```

*   **Показати список файлів, що належать встановленому пакунку:**
    ```bash
    rpm -ql coreutils
    ```

*   **Дізнатися, якому пакунку належить конкретний файл:**
    ```bash
    rpm -qf /etc/yum.conf
    ```

*   **Подивитися інформацію з `.rpm` файлу, який ще НЕ встановлено:**
    ```bash
    # -p означає "package file"
    rpm -qip my-package-1.0.rpm # Інформація про пакунок
    rpm -qpl my-package-1.0.rpm # Список файлів у пакунку
    ```

#### **2. Встановлення, оновлення та видалення**

Для цих операцій потрібні права `root` (`sudo`).

*   **Встановити пакунок з файлу (з прогрес-баром та деталями):**
    *   Опції `-v` (verbose) та `-h` (hash) використовуються майже завжди.
    ```bash
    sudo rpm -ivh package-name.rpm
    ```

*   **Оновити пакунок (або встановити, якщо його не було):**
    *   Це безпечніше, ніж `-i`, тому що коректно обробляє оновлення.
    ```bash
    sudo rpm -Uvh new-package-version.rpm
    ```

*   **Видалити встановлений пакунок:**
    *   **Важливо**: використовується назва пакунка, а не назва файлу.
    ```bash
    sudo rpm -e httpd
    ```

*   **Встановлення/видалення без перевірки залежностей (НЕБЕЗПЕЧНО):**
    *   **Використовуйте, тільки якщо ви на 100% впевнені, що робите.** Це може зламати систему.
    ```bash
    sudo rpm -ivh --nodeps broken-package.rpm
    sudo rpm -e --nodeps vital-package
    ```

#### **3. Перевірка цілісності пакунка (`-V`)**

Ця команда порівнює поточний стан файлів на диску з інформацією, збереженою в базі даних `rpm` (контрольні суми, права доступу, розмір тощо).

*   **Перевірити пакунок `coreutils`:**
    ```bash
    rpm -V coreutils
    ```
*   Якщо команда нічого не виводить — усі файли пакунка в порядку.
*   Якщо є зміни, вивід покаже, що саме змінилося. Наприклад:
    ```
    S.5....T.  c /etc/httpd/conf/httpd.conf
    ```
    Це означає, що у конфігураційного файлу `/etc/httpd/conf/httpd.conf` змінився розмір (`S`), контрольна сума MD5 (`5`) та час модифікації (`T`).

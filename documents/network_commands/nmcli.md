# nmcli

Команда `nmcli` (NetworkManager command-line interface) — це утиліта командного рядка для керування NetworkManager. Вона дозволяє переглядати стан мережі, керувати мережевими з'єднаннями та пристроями. Це основний інструмент для налаштування мережі в сучасних дистрибутивах Linux, таких як RHEL, CentOS, Fedora, Ubuntu та Debian.

Назва походить від **NetworkManager Command-Line Interface**.

#### **Базовий синтаксис**

```bash
nmcli [ОПЦІЇ] ОБ'ЄКТ { КОМАНДА | help }
```

*   **`ОБ'ЄКТ`**: Секція, якою потрібно керувати. Найпоширеніші:
    *   `general` (або `g`): Загальний стан NetworkManager.
    *   `connection` (або `c`): Мережеві з'єднання (профілі).
    *   `device` (або `d`): Мережеві пристрої (інтерфейси).
    *   `radio`: Управління бездротовими передавачами (Wi-Fi, WWAN).
*   **`КОМАНДА`**: Дія, яку потрібно виконати (`show`, `add`, `modify`, `delete`, `up`, `down`).

---

### **Основні об'єкти та команди**

#### **1. `nmcli general` — Загальний стан**

Використовується для перегляду загального стану мережі та NetworkManager.

| Команда | Пояснення |
| :--- | :--- |
| **`status`** | Показати загальний стан підключення до мережі. |
| **`hostname`** | Показати або змінити ім'я хоста системи. |
| **`permissions`** | Показати дозволи для користувачів на керування мережею. |
| **`logging`** | Переглянути або змінити рівень логування NetworkManager. |

#### **2. `nmcli device` — Управління пристроями**

Дозволяє керувати фізичними та віртуальними мережевими інтерфейсами.

| Команда | Пояснення |
| :--- | :--- |
| **`status`** | Показати список пристроїв та їх поточний стан. |
| **`show`** | Показати детальну інформацію про всі або конкретний пристрій. |
| **`connect <iface>`** | Підключити пристрій до мережі (активувати з'єднання). |
| **`disconnect <iface>`** | Відключити пристрій. |
| **`wifi list`** | Показати список доступних Wi-Fi мереж. |
| **`wifi connect <SSID> password <pass>`** | Підключитися до Wi-Fi мережі. |

#### **3. `nmcli connection` — Управління з'єднаннями**

З'єднання — це набір налаштувань (профіль) для мережевого підключення (IP-адреса, DNS, шлюз тощо).

| Команда | Пояснення |
| :--- | :--- |
| **`show`** | Показати список усіх збережених з'єднань. |
| **`show --active`** | Показати тільки активні з'єднання. |
| **`up <name|uuid>`** | Активувати (підняти) з'єднання. |
| **`down <name|uuid>`** | Деактивувати (опустити) з'єднання. |
| **`add type <type> ...`** | Створити нове з'єднання. |
| **`modify <name>`** | Змінити налаштування існуючого з'єднання. |
| **`delete <name>`** | Видалити з'єднання. |
| **`reload`** | Перезавантажити конфігураційні файли з'єднань. |

---

### **Приклади використання**

1.  **Перевірити загальний стан мережі:**
    ```bash
    nmcli general status
    ```
    *Вивід покаже, чи є повний доступ до мережі (`full`), обмежений (`limited`) чи відсутній (`none`).*

2.  **Показати список усіх мережевих пристроїв:**
    ```bash
    nmcli device status
    ```

3.  **Показати детальну інформацію про пристрій `eth0`:**
    ```bash
    nmcli device show eth0
    ```

4.  **Показати список збережених з'єднань:**
    ```bash
    nmcli connection show
    ```

5.  **Показати тільки активні з'єднання:**
    ```bash
    nmcli connection show --active
    ```

6.  **Відключити, а потім знову підключити інтерфейс `eth0`:**
    ```bash
    sudo nmcli device disconnect eth0
    sudo nmcli device connect eth0
    ```

7.  **Просканувати та вивести список доступних Wi-Fi мереж:**
    ```bash
    nmcli device wifi list
    ```

8.  **Підключитися до Wi-Fi мережі з SSID "MyHomeWiFi" та паролем "password123":**
    ```bash
    sudo nmcli device wifi connect MyHomeWiFi password "password123"
    ```

---

### **Продвинуті приклади**

1.  **Створити нове Ethernet-з'єднання з іменем `MyStaticEth` зі статичною IP-адресою:**
    ```bash
    sudo nmcli connection add type ethernet con-name MyStaticEth ifname eth0 ip4 192.168.1.100/24 gw4 192.168.1.1
    ```
    *   `type ethernet`: Тип з'єднання.
    *   `con-name MyStaticEth`: Ім'я нового з'єднання.
    *   `ifname eth0`: Прив'язка до інтерфейсу `eth0`.
    *   `ip4 192.168.1.100/24`: Статична IPv4-адреса з маскою.
    *   `gw4 192.168.1.1`: Шлюз за замовчуванням.

2.  **Додати DNS-сервери до з'єднання `MyStaticEth`:**
    ```bash
    sudo nmcli connection modify MyStaticEth ipv4.dns "8.8.8.8 8.8.4.4"
    ```

3.  **Переключити з'єднання на отримання IP-адреси по DHCP:**
    ```bash
    sudo nmcli connection modify MyStaticEth ipv4.method auto
    ```

4.  **Активувати створене з'єднання:**
    ```bash
    sudo nmcli connection up MyStaticEth
    ```

5.  **Видалити з'єднання:**
    ```bash
    sudo nmcli connection delete MyStaticEth
    ```

6.  **Тимчасово додати статичний маршрут до існуючого з'єднання `MyEth`:**
    ```bash
    sudo nmcli connection modify MyEth --temporary +ipv4.routes "192.168.1.0/24 192.168.0.1"
    ```
    *   `--temporary`: Зміни будуть діяти лише до перезавантаження NetworkManager або системи. **Якщо цей прапорець прибрати, зміни будуть збережені на постійній основі.**
    *   `+ipv4.routes`: Додає новий маршрут.
    *   `"192.168.1.0/24 192.168.0.1"`: Маршрут до мережі `192.168.1.0/24` через шлюз `192.168.0.1`.

7.  **Тимчасово додати додаткову IP-адресу до існуючого з'єднання `MyEth`:**
    ```bash
    sudo nmcli connection modify MyEth --temporary +ipv4.addresses "192.168.1.100/24"
    ```
    *   `--temporary`: Зміни будуть діяти лише до перезавантаження NetworkManager або системи. **Якщо цей прапорець прибрати, зміни будуть збережені на постійній основі.**
    *   `+ipv4.addresses`: Додає нову IP-адресу.
    *   `"192.168.1.100/24"`: Додаткова IPv4-адреса з маскою.

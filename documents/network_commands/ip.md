# ip

Утиліта `ip` — це потужний інструмент командного рядка з пакету `iproute2`, призначений для перегляду та налаштування мережевої підсистеми в ядрі Linux. Вона є сучасною заміною для застарілих команд, таких як `ifconfig`, `route` та `arp`.

#### **Базовий синтаксис**

Команда `ip` має об'єктно-орієнтований синтаксис:

```bash
ip [ ОПЦІЇ ] ОБ'ЄКТ { КОМАНДА | help }
```

*   **`ОБ'ЄКТ`**: тип об'єкта, яким потрібно керувати. Найпоширеніші:
    *   `link`: мережевий інтерфейс.
    *   `address` (або `addr`): IP-адреса на інтерфейсі.
    *   `route`: запис у таблиці маршрутизації.
    *   `neigh` (або `neighbour`): запис у ARP-таблиці (сусід).
*   **`КОМАНДА`**: дія, яку потрібно виконати над об'єктом (наприклад, `show`, `add`, `del`).

--- 

### **Основні об'єкти та команди**

#### **1. `ip link` — Управління мережевими інтерфейсами**

Цей об'єкт використовується для налаштування фізичних та віртуальних мережевих пристроїв.

| Команда | Пояснення |
| :--- | :--- |
| **`show`** | Показати список та стан усіх мережевих інтерфейсів. |
| **`set dev [назва] up`** | Увімкнути інтерфейс. |
| **`set dev [назва] down`**| Вимкнути інтерфейс. |
| **`set dev [назва] mtu [N]`** | Встановити новий розмір MTU (Maximum Transmission Unit). |

#### **2. `ip address` — Управління IP-адресами**

Скорочений варіант: `ip addr`. Використовується для роботи з IP-адресами.

| Команда | Пояснення |
| :--- | :--- |
| **`show`** | Показати всі IP-адреси на всіх інтерфейсах. |
| **`show dev [назва]`** | Показати IP-адреси на конкретному інтерфейсі. |
| **`add [адреса]/[маска] dev [назва]`** | Призначити IP-адресу інтерфейсу. |
| **`del [адреса]/[маска] dev [назва]`** | Видалити IP-адресу з інтерфейсу. |
| **`flush dev [назва]`** | Видалити всі IP-адреси з інтерфейсу. |

#### **3. `ip route` — Управління таблицею маршрутизації**

Дозволяє переглядати та змінювати таблицю маршрутизації ядра.

| Команда | Пояснення |
| :--- | :--- |
| **`show`** (або `list`) | Показати таблицю маршрутизації. |
| **`add [мережа]/[маска] via [шлюз]`** | Додати статичний маршрут до мережі через вказаний шлюз. |
| **`add default via [шлюз]`** | Додати маршрут за замовчуванням (default gateway). |
| **`del [мережа]/[маска]`** | Видалити статичний маршрут. |
| **`get [IP-адреса]`** | Показати, який маршрут буде використано для трафіку до вказаної IP-адреси. |

#### **4. `ip neigh` — Управління ARP-таблицею**

Скорочений варіант: `ip n`. Використовується для роботи з таблицею сусідів (ARP-кеш).

| Команда | Пояснення |
| :--- | :--- |
| **`show`** | Показати ARP-таблицю. |
| **`flush dev [назва]`** | Очистити ARP-кеш для вказаного інтерфейсу. |

--- 

### **Приклади використання**

1.  **Показати всі мережеві інтерфейси та їх стан:**
    ```bash
    ip link show
    ```

2.  **Показати детальну інформацію про один інтерфейс (наприклад, `eth0`):**
    ```bash
    ip addr show eth0
    ```

3.  **Увімкнути інтерфейс `eth0`:**
    ```bash
    sudo ip link set eth0 up
    ```

4.  **Призначити IP-адресу `192.168.1.100` з маскою `24` інтерфейсу `eth0`:**
    ```bash
    sudo ip addr add 192.168.1.100/24 dev eth0
    ```

5.  **Видалити цю IP-адресу:**
    ```bash
    sudo ip addr del 192.168.1.100/24 dev eth0
    ```

6.  **Показати поточну таблицю маршрутизації:**
    ```bash
    ip route
    ```

7.  **Додати шлюз за замовчуванням `192.168.1.1`:**
    ```bash
    sudo ip route add default via 192.168.1.1
    ```

8.  **Додати статичний маршрут до мережі `10.10.0.0/16` через шлюз `192.168.1.254`:**
    ```bash
    sudo ip route add 10.10.0.0/16 via 192.168.1.254
    ```

9.  **Показати ARP-таблицю (відомих сусідів у локальній мережі):**
    ```bash
    ip neigh
    ```

10. **Дізнатися, яким маршрутом піде трафік до `8.8.8.8`:**
    ```bash
    ip route get 8.8.8.8
    ```

11. **Показати статистику (кількість пакетів, помилки) для всіх інтерфейсів:**
    ```bash
    ip -s link
    ```
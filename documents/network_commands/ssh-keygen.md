# ssh-keygen

Утиліта `ssh-keygen` (secure shell key generation) — це стандартний інструмент для створення, керування та конвертації ключів аутентифікації для протоколу SSH (Secure Shell). Вона дозволяє налаштувати безпарольний вхід на сервери, що є одночасно зручнішим і безпечнішим за аутентифікацію за паролем.

#### **Базовий синтаксис**

```bash
ssh-keygen [опції]
```

*   Зазвичай запускається з опціями для вказівки типу ключа, довжини та коментаря. Якщо запустити без опцій, `ssh-keygen` запропонує значення за замовчуванням.

---

### **Основні опції `ssh-keygen`**

| Опція | Пояснення |
| :--- | :--- |
| **`-t [тип]`** | Вказує тип ключа для створення. Найпопулярніші: `ed25519` (сучасний і рекомендований), `rsa` (класичний). |
| **`-b [біти]`** | Вказує довжину ключа в бітах. Використовується для `rsa` (наприклад, `4096`). Для `ed25519` довжина фіксована. |
| **`-f [шлях]`** | Вказує шлях для збереження файлу ключа. За замовчуванням `~/.ssh/id_[тип]`. |
| **`-C "[коментар]"`** | Додає коментар до ключа. Зазвичай тут вказують email або ідентифікатор `user@hostname`. |
| **`-N "[пароль]"`** | Встановлює пароль (passphrase) для захисту приватного ключа. |
| **`-p`** | Дозволяє змінити пароль існуючого приватного ключа. |
| **`-y`** | Зчитує файл приватного ключа і виводить відповідний публічний ключ. |
| **`-l -f [файл]`** | Показує "відбиток" (fingerprint) публічного ключа. Це короткий хеш для легкої перевірки. |

---
### **Приклади використання**

#### 1. Створення сучасного ключа Ed25519 (рекомендовано)
Це найпростіший і найбезпечніший спосіб на сьогодні.

```bash
ssh-keygen -t ed25519 -C "my-email@example.com"
```
*   Програма запропонує шлях для збереження (`~/.ssh/id_ed25519`) та попросить ввести пароль для ключа.
*   **Настійно рекомендується встановлювати пароль!** Це додатковий рівень захисту на випадок, якщо ваш приватний ключ буде вкрадено.

#### 2. Створення класичного ключа RSA (4096 біт)
Якщо потрібна сумісність зі старими системами, які не підтримують Ed25519.

```bash
ssh-keygen -t rsa -b 4096 -C "my-email@example.com"
```
*   **`-b 4096`**: Встановлює надійну довжину ключа.

#### 3. Створення ключа без пароля
**Небезпечно**, але може бути корисним для автоматизованих скриптів.

```bash
ssh-keygen -t ed25519 -f ~/.ssh/service_key -N ""
```
*   **`-f`**: Вказує інший файл, щоб не перезаписати ваш основний ключ `id_ed25519`.
*   **`-N ""`**: Встановлює порожній пароль.

#### 4. Зміна пароля для існуючого приватного ключа
Якщо ви хочете додати, змінити або видалити пароль.

```bash
ssh-keygen -p -f ~/.ssh/id_rsa
```
*   Програма запитає старий пароль, а потім двічі новий. Щоб видалити пароль, просто залиште поле нового пароля порожнім.

#### 5. Отримання публічного ключа з приватного
Якщо у вас є лише файл приватного ключа, ви завжди можете відновити з нього публічний.

```bash
ssh-keygen -y -f ~/.ssh/id_ed25519
```
*   Це корисно, якщо ви випадково видалили файл `.pub`.
*   Результат можна одразу скопіювати або перенаправити у файл:
    ```bash
    ssh-keygen -y -f ~/.ssh/id_ed25519 > ~/.ssh/id_ed25519.pub
    ```

#### 6. Перегляд "відбитка" ключа (Fingerprint)
Відбиток — це короткий рядок, який легше перевірити візуально, ніж повний ключ.

```bash
ssh-keygen -l -f ~/.ssh/id_ed25519.pub
```
*Результат буде виглядати приблизно так:*
`256 SHA256:AbCdEfGhIjKlMnOpQrStUvWxYz1234567890 user@hostname (ED25519)`

#### 7. Копіювання публічного ключа на сервер
Після створення ключа його публічну частину потрібно додати на сервер у файл `~/.ssh/authorized_keys`. Найпростіший спосіб зробити це — утиліта `ssh-copy-id`.

```bash
ssh-copy-id user@remote_host
```
*   Ця команда автоматично знайде ваш ключ `~/.ssh/id_ed25519.pub` (або інший) і додасть його на сервер `remote_host`. Востаннє потрібно буде ввести пароль від вашого акаунта на сервері.
*   Після цього вхід на сервер буде здійснюватися за ключем: `ssh user@remote_host`.
# ss

Утиліта `ss` (socket statistics) — це сучасний та ефективний інструмент для аналізу мережевих сокетів. Вона є заміною для застарілої команди `netstat` і працює значно швидше, оскільки отримує інформацію безпосередньо з ядра системи.

#### **Базовий синтаксис**

```bash
ss [опції] [фільтр]
```

*   **`[опції]`**: Ключі для фільтрації та форматування виводу.
*   **`[фільтр]`**: Вираз для фільтрації з'єднань за станом, адресою чи портом.

---

### **Основні ключі (опції)**

| Ключ | Пояснення |
| :--- | :--- |
| **`-a`, `--all`** | Показати всі сокети (і слухаючі, і встановлені). |
| **`-l`, `--listening`** | Показати тільки слухаючі (listening) сокети. |
| **`-n`, `--numeric`** | Не перетворювати імена хостів та служб (показувати IP-адреси та номери портів). |
| **`-p`, `--processes`** | Показати процес (PID та ім'я), який використовує сокет. Потребує прав `sudo`. |
| **`-e`, `--extended`** | Показати детальну інформацію про сокет. |
| **`-o`, `--options`** | Показати інформацію про таймери сокета. |
| **`-i`, `--info`** | Показати внутрішню інформацію про TCP-з'єднання. |
| **`-s`, `--summary`** | Вивести зведену статистику по сокетах. |

#### **Фільтрація за типом сокета**

| Ключ | Пояснення |
| :--- | :--- |
| **`-t`, `--tcp`** | Показати тільки TCP-сокети. |
| **`-u`, `--udp`** | Показати тільки UDP-сокети. |
| **`-x`, `--unix`** | Показати тільки Unix-сокети. |
| **`-w`, `--raw`** | Показати тільки Raw-сокети. |

--- 

### **Фільтрація за станом та адресою**

`ss` дозволяє використовувати потужні вирази для фільтрації.

*   **`state <СТАН>`**: фільтрація за станом TCP-з'єднання. Основні стани:
    *   `established`, `syn-sent`, `syn-recv`, `fin-wait-1`, `fin-wait-2`, `time-wait`, `closed`, `close-wait`, `last-ack`, `listening`, `closing`.

*   **`dst <АДРЕСА:ПОРТ>`**: фільтрація за адресою та портом призначення.
*   **`src <АДРЕСА:ПОРТ>`**: фільтрація за адресою та портом джерела.

*   **`dport <ОПЕРАТОР> <ПОРТ>`**: порівняння порту призначення (наприклад, `dport = :80` або `dport > :1024`).
*   **`sport <ОПЕРАТОР> <ПОРТ>`**: порівняння порту джерела.

--- 

### **Приклади використання**

1.  **Показати всі активні з'єднання:**
    ```bash
    ss
    ```

2.  **Показати всі TCP-з'єднання (слухаючі та встановлені):**
    ```bash
    ss -at
    ```

3.  **Показати всі слухаючі TCP-сокети з іменами процесів:**
    ```bash
    sudo ss -ltp
    ```

4.  **Показати всі UDP-сокети:**
    ```bash
    ss -au
    ```

5.  **Знайти всі з'єднання до хоста `192.168.1.100`:**
    ```bash
    ss dst 192.168.1.100
    ```

6.  **Знайти всі з'єднання, пов'язані з HTTP-портом (80):**
    ```bash
    ss -a '( dport = :80 or sport = :80 )'
    ```

7.  **Показати всі встановлені (established) SSH-з'єднання:**
    ```bash
    ss -t state established '( dport = :22 or sport = :22 )'
    ```

8.  **Показати всі TCP-сокети у стані `TIME-WAIT`:**
    ```bash
    ss -t state time-wait
    ```

9.  **Показати процеси, що використовують Unix-сокети:**
    ```bash
    sudo ss -xp
    ```

10. **Вивести зведену статистику по сокетах:**
    ```bash
    ss -s
    ```

11. **Показати всі слухаючі сокети без перетворення імен та з іменами процесів:**
    ```bash
    sudo ss -lnp
    ```
